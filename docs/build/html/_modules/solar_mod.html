

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>solar_mod &mdash; ENR835 1.0.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="ENR835 1.0.0 documentation" href="../index.html"/>
        <link rel="up" title="Module code" href="index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../index.html" class="fa fa-home"> ENR835</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../ENR835.html">ENR835</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ENR835.html#cours-1">Cours 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ENR835.html#cours-2">Cours 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ENR835.html#cours-3">Cours 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ENR835.html#cours-4">Cours 4</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ENR835.html#cours-5">Cours 5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ENR835.html#cours-6">Cours 6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ENR835.html#cours-7">Cours 7</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ENR835.html#cours-8">Cours 8</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ENR835.html#cours-9">Cours 9</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ENR835.html#cours-10">Cours 10</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ENR835.html#cours-11">Cours 11</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ENR835.html#cours-12">Cours 12</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ENR835.html#cours-13">Cours 13</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../python.html">Python</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../python.html#solar-mod">solar_mod</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python.html#data-mod">data_mod</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python.html#tools-mod">tools_mod</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sphinx.html">Sphinx</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../sphinx.html#mise-en-page">Mise en page</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx.html#titre-de-niveau-1">Titre de niveau 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx.html#mathematique">Mathématique</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx.html#graphique">Graphique</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx.html#python">Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sphinx.html#autres">Autres</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../devoir.html">Devoirs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projet.html">Projet</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">ENR835</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Module code</a> &raquo;</li>
      
    <li>solar_mod</li>
      <li class="wy-breadcrumbs-aside">
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <h1>Source code for solar_mod</h1><div class="highlight"><pre>
<span class="c">#coding: latin-1</span>
<span class="c">#   fonctions utiles systemes solaires</span>
<span class="c">#       alp_alpn(the)</span>
<span class="c">#       angle_diffus(beta)</span>
<span class="c">#       angle_reflechi(beta)</span>
<span class="c">#       angle_horaire(sol_t)</span>
<span class="c">#       angle_sunset(phi,delta)</span>
<span class="c">#       azimuth_solaire(thes,delta,phi,ome)</span>
<span class="c">#       Calcul_Ka(It,Itb,Itd,Itr,theb,bo,beta)</span>
<span class="c">#       Calcul_pertes(T1c,data)</span>
<span class="c">#       normale_solaire(delt,phi,ome,beta,gam)</span>

<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">scipy.optimize</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">scipy.integrate</span> <span class="kn">import</span> <span class="n">quad</span>
<span class="kn">from</span> <span class="nn">scipy.special</span> <span class="kn">import</span> <span class="n">erf</span><span class="p">,</span><span class="n">erfc</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="o">*</span>
<span class="c">#import numpy as np</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="kn">as</span> <span class="nn">mpl</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>




<span class="n">hrm</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="mi">744</span><span class="p">,</span><span class="mi">672</span><span class="p">,</span><span class="mi">744</span><span class="p">,</span><span class="mi">720</span><span class="p">,</span><span class="mi">744</span><span class="p">,</span><span class="mi">720</span><span class="p">,</span><span class="mi">744</span><span class="p">,</span><span class="mi">744</span><span class="p">,</span><span class="mi">720</span><span class="p">,</span><span class="mi">744</span><span class="p">,</span><span class="mi">720</span><span class="p">,</span><span class="mi">744</span><span class="p">])</span>  <span class="c"># nombre d&#39;heures dans chaque mois</span>
<span class="n">hrr</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="mi">744</span><span class="p">,</span><span class="mi">1416</span><span class="p">,</span><span class="mi">2160</span><span class="p">,</span><span class="mi">2880</span><span class="p">,</span><span class="mi">3624</span><span class="p">,</span><span class="mi">4344</span><span class="p">,</span><span class="mi">5088</span><span class="p">,</span><span class="mi">5832</span><span class="p">,</span><span class="mi">6552</span><span class="p">,</span><span class="mi">7296</span><span class="p">,</span><span class="mi">8016</span><span class="p">,</span><span class="mi">8760</span><span class="p">])</span> <span class="c"># nombre d&#39;heures ?coul?es apr?s chaque mois</span>
<span class="n">jjm</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="mi">17</span><span class="p">,</span><span class="mi">47</span><span class="p">,</span><span class="mi">75</span><span class="p">,</span><span class="mi">105</span><span class="p">,</span><span class="mi">135</span><span class="p">,</span><span class="mi">162</span><span class="p">,</span><span class="mi">198</span><span class="p">,</span><span class="mi">228</span><span class="p">,</span><span class="mi">258</span><span class="p">,</span><span class="mi">288</span><span class="p">,</span><span class="mi">318</span><span class="p">,</span><span class="mi">344</span><span class="p">])</span>
<span class="n">jnm</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="mi">31</span><span class="p">,</span><span class="mi">28</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">31</span><span class="p">])</span>
<span class="n">jjr</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">31</span><span class="p">,</span><span class="mi">59</span><span class="p">,</span><span class="mi">90</span><span class="p">,</span><span class="mi">120</span><span class="p">,</span><span class="mi">151</span><span class="p">,</span><span class="mi">181</span><span class="p">,</span><span class="mi">212</span><span class="p">,</span><span class="mi">243</span><span class="p">,</span><span class="mi">273</span><span class="p">,</span><span class="mi">304</span><span class="p">,</span><span class="mi">334</span><span class="p">])</span>
<span class="n">nom</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;jan&#39;</span><span class="p">,</span><span class="s">&#39;fev&#39;</span><span class="p">,</span><span class="s">&#39;mars&#39;</span><span class="p">,</span><span class="s">&#39;avr&#39;</span><span class="p">,</span><span class="s">&#39;mai&#39;</span><span class="p">,</span><span class="s">&#39;juin&#39;</span><span class="p">,</span><span class="s">&#39;juil&#39;</span><span class="p">,</span><span class="s">&#39;aout&#39;</span><span class="p">,</span><span class="s">&#39;sept&#39;</span><span class="p">,</span><span class="s">&#39;oct&#39;</span><span class="p">,</span><span class="s">&#39;nov&#39;</span><span class="p">,</span><span class="s">&#39;dec&#39;</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">sind</span><span class="p">(</span><span class="n">the</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">the</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mf">180.0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">y</span>
<span class="k">def</span> <span class="nf">cosd</span><span class="p">(</span><span class="n">the</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">the</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mf">180.0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">y</span>
<span class="k">def</span> <span class="nf">tand</span><span class="p">(</span><span class="n">the</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">tan</span><span class="p">(</span><span class="n">the</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mf">180.0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">y</span>
<span class="k">def</span> <span class="nf">arccosd</span><span class="p">(</span><span class="n">ct</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">arccos</span><span class="p">(</span><span class="n">ct</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">y</span><span class="o">*</span><span class="mi">180</span><span class="o">/</span><span class="n">pi</span>
<span class="k">def</span> <span class="nf">arcsind</span><span class="p">(</span><span class="n">ct</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">arcsin</span><span class="p">(</span><span class="n">ct</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">y</span><span class="o">*</span><span class="mi">180</span><span class="o">/</span><span class="n">pi</span>
<span class="k">def</span> <span class="nf">arctand</span><span class="p">(</span><span class="n">ct</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">arctan</span><span class="p">(</span><span class="n">ct</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">y</span><span class="o">*</span><span class="mi">180</span><span class="o">/</span><span class="n">pi</span>
<div class="viewcode-block" id="alp_alpn"><a class="viewcode-back" href="../python.html#solar_mod.alp_alpn">[docs]</a><span class="k">def</span> <span class="nf">alp_alpn</span><span class="p">(</span><span class="n">the</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="mf">1.5879e-3</span><span class="o">*</span><span class="n">the</span><span class="o">+</span><span class="mf">2.7314e-4</span><span class="o">*</span><span class="n">the</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="mf">2.3026e-5</span><span class="o">*</span><span class="n">the</span><span class="o">**</span><span class="mi">3</span><span class="o">+</span><span class="mf">9.0244e-7</span><span class="o">*</span><span class="n">the</span><span class="o">**</span><span class="mi">4</span><span class="o">-</span><span class="mf">1.8e-8</span><span class="o">*</span><span class="n">the</span><span class="o">**</span><span class="mi">5</span><span class="o">+</span><span class="mf">1.7734e-10</span><span class="o">*</span><span class="n">the</span><span class="o">**</span><span class="mi">6</span> <span class="o">-</span> <span class="mf">6.9937e-13</span><span class="o">*</span><span class="n">the</span><span class="o">**</span><span class="mi">7</span>
    <span class="n">y</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">y</span></div>
<span class="k">def</span> <span class="nf">angle_diffus</span><span class="p">(</span><span class="n">beta</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mf">59.7</span> <span class="o">-</span> <span class="mf">0.1388</span><span class="o">*</span><span class="n">beta</span><span class="o">+</span><span class="mf">0.001497</span><span class="o">*</span><span class="n">beta</span><span class="o">**</span><span class="mi">2</span>
    <span class="k">return</span> <span class="n">y</span>

<div class="viewcode-block" id="angle_reflechi"><a class="viewcode-back" href="../python.html#solar_mod.angle_reflechi">[docs]</a><span class="k">def</span> <span class="nf">angle_reflechi</span><span class="p">(</span><span class="n">beta</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mf">90.0</span> <span class="o">-</span> <span class="mf">0.5788</span><span class="o">*</span><span class="n">beta</span> <span class="o">+</span> <span class="mf">0.002693</span><span class="o">*</span><span class="n">beta</span><span class="o">**</span><span class="mi">2</span>


    <span class="k">return</span> <span class="n">y</span>

</div>
<div class="viewcode-block" id="angle_horaire"><a class="viewcode-back" href="../python.html#solar_mod.angle_horaire">[docs]</a><span class="k">def</span> <span class="nf">angle_horaire</span><span class="p">(</span><span class="n">sol_t</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">sol_t</span><span class="o">.</span><span class="n">hr</span> <span class="o">+</span> <span class="n">sol_t</span><span class="o">.</span><span class="n">min</span><span class="o">/</span><span class="mf">60.0</span>
    <span class="n">ome</span> <span class="o">=</span> <span class="mf">15.0</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mf">12.0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ome</span>

</div>
<div class="viewcode-block" id="angle_sunset"><a class="viewcode-back" href="../python.html#solar_mod.angle_sunset">[docs]</a><span class="k">def</span> <span class="nf">angle_sunset</span><span class="p">(</span><span class="n">phi</span><span class="p">,</span><span class="n">delta</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">com</span> <span class="o">=</span> <span class="o">-</span><span class="n">tand</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">tand</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span>
    <span class="n">omes</span> <span class="o">=</span> <span class="n">arccos</span><span class="p">(</span><span class="n">com</span><span class="p">)</span><span class="o">*</span><span class="mf">180.0</span><span class="o">/</span><span class="n">pi</span>
    <span class="k">return</span> <span class="n">omes</span>

</div>
<div class="viewcode-block" id="azimuth_solaire"><a class="viewcode-back" href="../python.html#solar_mod.azimuth_solaire">[docs]</a><span class="k">def</span> <span class="nf">azimuth_solaire</span><span class="p">(</span><span class="n">thes</span><span class="p">,</span><span class="n">delta</span><span class="p">,</span><span class="n">phi</span><span class="p">,</span><span class="n">ome</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cosz</span> <span class="o">=</span> <span class="p">(</span><span class="n">cosd</span><span class="p">(</span><span class="n">thes</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">-</span><span class="n">sind</span><span class="p">(</span><span class="n">delta</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="n">sind</span><span class="p">(</span><span class="n">thes</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">phi</span><span class="p">))</span>
    <span class="n">cosz</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">cosz</span><span class="p">);</span>
    <span class="n">gams</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">ome</span><span class="p">)</span><span class="o">*</span><span class="n">arccos</span><span class="p">(</span><span class="n">cosz</span><span class="p">)</span><span class="o">*</span><span class="mi">180</span><span class="o">/</span><span class="n">pi</span>

    <span class="k">return</span> <span class="n">gams</span>


</div>
<div class="viewcode-block" id="Calcul_Ka"><a class="viewcode-back" href="../python.html#solar_mod.Calcul_Ka">[docs]</a><span class="k">def</span> <span class="nf">Calcul_Ka</span><span class="p">(</span><span class="n">It</span><span class="p">,</span><span class="n">Itb</span><span class="p">,</span><span class="n">Itd</span><span class="p">,</span><span class="n">Itr</span><span class="p">,</span><span class="n">theb</span><span class="p">,</span><span class="n">bo</span><span class="p">,</span><span class="n">beta</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">Kb</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">bo</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">cosd</span><span class="p">(</span><span class="n">theb</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">the1d</span> <span class="o">=</span> <span class="n">angle_diffus</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span>
    <span class="n">Kd</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">bo</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">cosd</span><span class="p">(</span><span class="n">the1d</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">the1r</span> <span class="o">=</span> <span class="n">angle_reflechi</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span>
    <span class="n">Kr</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">bo</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">cosd</span><span class="p">(</span><span class="n">the1r</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>
    <span class="n">Ka</span> <span class="o">=</span> <span class="p">(</span><span class="n">Kb</span><span class="o">*</span><span class="n">Itb</span><span class="o">+</span><span class="n">Kd</span><span class="o">*</span><span class="n">Itd</span><span class="o">+</span><span class="n">Kr</span><span class="o">*</span><span class="n">Itr</span><span class="p">)</span><span class="o">/</span><span class="n">It</span>
    <span class="k">return</span> <span class="n">Ka</span>
</div>
<div class="viewcode-block" id="decl_solaire"><a class="viewcode-back" href="../python.html#solar_mod.decl_solaire">[docs]</a><span class="k">def</span> <span class="nf">decl_solaire</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">cas</span> <span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dec</span> <span class="o">=</span> <span class="mf">23.45</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="mf">360.0</span><span class="o">*</span><span class="p">(</span><span class="mf">284.0</span><span class="o">+</span><span class="n">n</span><span class="p">)</span><span class="o">/</span><span class="mf">365.0</span><span class="p">);</span>
    <span class="k">if</span> <span class="n">cas</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">B</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mi">360</span><span class="o">/</span><span class="mf">365.25</span>
        <span class="n">dec</span> <span class="o">=</span> <span class="mi">180</span><span class="o">/</span><span class="n">pi</span><span class="o">*</span><span class="p">(</span><span class="mf">0.006918</span><span class="o">-</span><span class="mf">0.399912</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">B</span><span class="p">)</span><span class="o">+</span><span class="mf">0.070257</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">B</span><span class="p">)</span> <span class="o">-</span> \
            <span class="mf">0.006758</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">B</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.000907</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">B</span><span class="p">)</span> \
            <span class="o">-</span><span class="mf">0.002679</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">B</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.00148</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">B</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">dec</span>

</div>
<div class="viewcode-block" id="normale_solaire"><a class="viewcode-back" href="../python.html#solar_mod.normale_solaire">[docs]</a><span class="k">def</span> <span class="nf">normale_solaire</span><span class="p">(</span><span class="n">delt</span><span class="p">,</span><span class="n">phi</span><span class="p">,</span><span class="n">ome</span><span class="p">,</span><span class="n">beta</span><span class="p">,</span><span class="n">gam</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">cosz</span> <span class="o">=</span> <span class="n">sind</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span><span class="o">-</span><span class="n">sind</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">gam</span><span class="p">)</span> \
           <span class="o">+</span> <span class="n">cosd</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">ome</span><span class="p">)</span> <span class="o">+</span> <span class="n">cosd</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">ome</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">gam</span><span class="p">)</span> \
           <span class="o">+</span> <span class="n">cosd</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">gam</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">ome</span><span class="p">)</span>
    <span class="n">cosz</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">cosz</span><span class="p">)</span>
    <span class="n">cosz</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">cosz</span><span class="p">)</span>
    <span class="n">the</span> <span class="o">=</span> <span class="n">arccos</span><span class="p">(</span><span class="n">cosz</span><span class="p">)</span><span class="o">*</span><span class="mf">180.0</span><span class="o">/</span><span class="n">pi</span>
    <span class="k">return</span> <span class="n">the</span></div>
<div class="viewcode-block" id="normale_solaire2"><a class="viewcode-back" href="../python.html#solar_mod.normale_solaire2">[docs]</a><span class="k">def</span> <span class="nf">normale_solaire2</span><span class="p">(</span><span class="n">thez</span><span class="p">,</span><span class="n">gams</span><span class="p">,</span><span class="n">beta</span><span class="p">,</span><span class="n">gam</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c">#     (Eq 1.6.2 de DB 3rd edition)</span>
    <span class="c">#</span>
    <span class="c">#        beta : angle du capteur pr plan horizontal</span>
    <span class="c">#        gam : azimuth capteur</span>
    <span class="c">#        delt : declinaison en degre</span>
    <span class="c">#        ome : angle horaire en degre</span>
    <span class="c">#        phi : latitude en degrées</span>

    <span class="n">cosz</span> <span class="o">=</span> <span class="n">cosd</span><span class="p">(</span><span class="n">thez</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span><span class="o">+</span><span class="n">sind</span><span class="p">(</span><span class="n">thez</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">gams</span><span class="o">-</span><span class="n">gam</span><span class="p">)</span>
    <span class="n">cosz</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">cosz</span><span class="p">)</span>
    <span class="n">cosz</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">cosz</span><span class="p">)</span>
    <span class="n">the</span> <span class="o">=</span> <span class="n">arccos</span><span class="p">(</span><span class="n">cosz</span><span class="p">)</span><span class="o">*</span><span class="mf">180.0</span><span class="o">/</span><span class="n">pi</span>
    <span class="k">return</span> <span class="n">the</span></div>
<div class="viewcode-block" id="zenith_solaire"><a class="viewcode-back" href="../python.html#solar_mod.zenith_solaire">[docs]</a><span class="k">def</span>  <span class="nf">zenith_solaire</span><span class="p">(</span><span class="n">phi</span><span class="p">,</span><span class="n">delt</span><span class="p">,</span><span class="n">ome</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># (1.6.5) de D.B 3rd édition</span>
    <span class="c"># angle de zenith du soleil en degres</span>
    <span class="c">#       phi : latitude en degre nord positif, sud negatif</span>
    <span class="c">#        del : declinaison en degre</span>
    <span class="c">#        ome : angle horaire en degre</span>
    <span class="n">cosz</span> <span class="o">=</span> <span class="n">cosd</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">ome</span><span class="p">)</span> <span class="o">+</span> <span class="n">sind</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span>
    <span class="n">cosz</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">cosz</span><span class="p">)</span>
    <span class="n">cosz</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">cosz</span><span class="p">)</span>
    <span class="n">thez</span> <span class="o">=</span> <span class="n">arccos</span><span class="p">(</span><span class="n">cosz</span><span class="p">)</span><span class="o">*</span><span class="mf">180.0</span><span class="o">/</span><span class="n">pi</span>
    <span class="k">return</span> <span class="n">thez</span></div>
<div class="viewcode-block" id="heure_angle"><a class="viewcode-back" href="../python.html#solar_mod.heure_angle">[docs]</a><span class="k">def</span> <span class="nf">heure_angle</span><span class="p">(</span><span class="n">ome</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sol_tn</span>  <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">&#39;temps&#39;</span><span class="p">,[</span><span class="s">&#39;hr&#39;</span><span class="p">,</span><span class="s">&#39;min&#39;</span><span class="p">,</span><span class="s">&#39;jour&#39;</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">ome</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">sol_tn</span><span class="o">.</span><span class="n">hr</span> <span class="o">=</span> <span class="mf">12.0</span>
        <span class="n">sol_tn</span><span class="o">.</span><span class="n">min</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">heur</span> <span class="o">=</span> <span class="n">ome</span><span class="o">/</span><span class="mf">15.0</span>
        <span class="n">dh</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">ome</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">floor</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">ome</span><span class="o">/</span><span class="mf">15.0</span><span class="p">))</span><span class="o">+</span><span class="mf">0.5</span><span class="p">)</span><span class="o">-</span><span class="mf">0.5</span>
        <span class="n">dmin</span> <span class="o">=</span> <span class="p">(</span><span class="n">heur</span> <span class="o">-</span> <span class="n">dh</span><span class="p">)</span><span class="o">*</span><span class="mf">60.0</span>
        <span class="n">sol_tn</span><span class="o">.</span><span class="n">hr</span> <span class="o">=</span> <span class="mf">12.0</span><span class="o">+</span><span class="n">dh</span>
        <span class="n">sol_tn</span><span class="o">.</span><span class="n">min</span> <span class="o">=</span> <span class="n">dmin</span>
        <span class="k">if</span><span class="p">(</span><span class="n">sol_tn</span><span class="o">.</span><span class="n">min</span> <span class="o">&gt;=</span> <span class="mi">60</span><span class="p">):</span>
            <span class="n">sol_tn</span><span class="o">.</span><span class="n">min</span> <span class="o">=</span> <span class="n">sol_tn</span><span class="o">.</span><span class="n">min</span> <span class="o">-</span> <span class="mi">60</span>
            <span class="n">sol_tn</span><span class="o">.</span><span class="n">hr</span> <span class="o">=</span> <span class="n">sol_tn</span><span class="o">.</span><span class="n">hr</span><span class="o">+</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">sol_tn</span>
</div>
<div class="viewcode-block" id="heure_solaire"><a class="viewcode-back" href="../python.html#solar_mod.heure_solaire">[docs]</a><span class="k">def</span> <span class="nf">heure_solaire</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span><span class="n">Lst</span><span class="p">,</span><span class="n">del_h</span><span class="p">,</span><span class="n">st</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># st : temps legal</span>
    <span class="c">#   st_jour : jour de l&#39;année</span>
    <span class="c">#   st_hr : heure , st_min : minute</span>
    <span class="c">#   lon : longitude (lon.deg, lon.min )</span>
    <span class="c">#   Lst : longitude du méridien de l&#39;heure (-180 à 180, ex: -75 eastern time)</span>
    <span class="c">#   del_h : difference entre l&#39;heure legale et l&#39;heure strandard</span>
    <span class="c">#               Amerique    0 hiver , 1 ete</span>
    <span class="c">#               Europe       1 hiver , 2 ete</span>
    <span class="n">sol_t</span>  <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">&#39;temps&#39;</span><span class="p">,[</span><span class="s">&#39;hr&#39;</span><span class="p">,</span><span class="s">&#39;min&#39;</span><span class="p">,</span><span class="s">&#39;jour&#39;</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">st</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c"># calul du temps actuel</span>
        <span class="n">st</span>  <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">&#39;temps&#39;</span><span class="p">,[</span><span class="s">&#39;hr&#39;</span><span class="p">,</span><span class="s">&#39;min&#39;</span><span class="p">,</span><span class="s">&#39;jour&#39;</span><span class="p">])</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">localtime</span><span class="p">()</span>
        <span class="n">st</span><span class="o">.</span><span class="n">hr</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_hour</span>
        <span class="n">st</span><span class="o">.</span><span class="n">min</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_min</span>
        <span class="n">jour</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_mday</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_yday</span>
        <span class="n">del_h</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">tm_isdst</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">jour</span>
    <span class="n">B</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="mf">360.0</span><span class="o">/</span><span class="mf">365.0</span>
    <span class="n">E</span> <span class="o">=</span> <span class="mf">229.2</span><span class="o">*</span><span class="p">(</span><span class="mf">0.000075</span><span class="o">+</span><span class="mf">0.001868</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">B</span><span class="p">)</span><span class="o">-</span> \
        <span class="mf">0.032077</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">B</span><span class="p">)</span><span class="o">-</span><span class="mf">0.014615</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">B</span><span class="p">)</span> <span class="o">-</span> <span class="mf">0.04089</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">B</span><span class="p">))</span>
    <span class="n">dt</span> <span class="o">=</span> <span class="mf">4.0</span><span class="o">*</span><span class="p">(</span><span class="n">lon</span><span class="o">-</span><span class="n">Lst</span><span class="p">)</span><span class="o">+</span><span class="n">E</span>
    <span class="n">dh</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">dt</span><span class="p">)</span><span class="o">*</span><span class="n">floor</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">dt</span><span class="o">/</span><span class="mf">60.0</span><span class="p">))</span>
    <span class="n">dmin</span> <span class="o">=</span> <span class="n">dt</span> <span class="o">-</span> <span class="n">dh</span><span class="o">*</span><span class="mf">60.0</span>
    <span class="n">sol_t</span><span class="o">.</span><span class="n">hr</span> <span class="o">=</span>   <span class="n">st</span><span class="o">.</span><span class="n">hr</span> <span class="o">-</span> <span class="n">del_h</span> <span class="o">+</span> <span class="n">dh</span>
    <span class="n">sol_t</span><span class="o">.</span><span class="n">min</span> <span class="o">=</span>   <span class="n">st</span><span class="o">.</span><span class="n">min</span> <span class="o">+</span> <span class="n">dmin</span>
    <span class="k">if</span><span class="p">(</span><span class="n">sol_t</span><span class="o">.</span><span class="n">min</span> <span class="o">&gt;=</span> <span class="mi">60</span><span class="p">):</span>
        <span class="n">sol_t</span><span class="o">.</span><span class="n">min</span> <span class="o">=</span> <span class="n">sol_t</span><span class="o">.</span><span class="n">min</span> <span class="o">-</span> <span class="mi">60</span>
        <span class="n">sol_t</span><span class="o">.</span><span class="n">hr</span> <span class="o">=</span> <span class="n">sol_t</span><span class="o">.</span><span class="n">hr</span><span class="o">+</span><span class="mi">1</span>
    <span class="k">if</span><span class="p">(</span><span class="n">sol_t</span><span class="o">.</span><span class="n">min</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
        <span class="n">sol_t</span><span class="o">.</span><span class="n">min</span> <span class="o">=</span> <span class="n">sol_t</span><span class="o">.</span><span class="n">min</span> <span class="o">+</span> <span class="mi">60</span>
        <span class="n">sol_t</span><span class="o">.</span><span class="n">hr</span> <span class="o">=</span> <span class="n">sol_t</span><span class="o">.</span><span class="n">hr</span><span class="o">-</span><span class="mi">1</span>
    <span class="n">sol_t</span><span class="o">.</span><span class="n">jour</span> <span class="o">=</span> <span class="n">n</span>
    <span class="k">return</span> <span class="n">sol_t</span></div>
<div class="viewcode-block" id="heure_legale"><a class="viewcode-back" href="../python.html#solar_mod.heure_legale">[docs]</a><span class="k">def</span> <span class="nf">heure_legale</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span><span class="n">Lst</span><span class="p">,</span><span class="n">del_h</span><span class="p">,</span><span class="n">sol_t</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># sol_t : temps solaire</span>
    <span class="c">#   solt_jour : jour de l&#39;année</span>
    <span class="c">#   solt_hr : heure , st_min : minute</span>
    <span class="c">#   lon : longitude (lon.deg, lon.min )</span>
    <span class="c">#   Lst : longitude du méridien de l&#39;heure (-180 à 180, ex: -75 eastern time)</span>
    <span class="c">#   del_h : difference entre l&#39;heure legale et l&#39;heure strandard</span>
    <span class="c">#               Amerique    0 hiver , 1 ete</span>
    <span class="c">#               Europe       1 hiver , 2 ete</span>
    <span class="n">tt</span> <span class="o">=</span> <span class="n">sol_t</span><span class="o">.</span><span class="n">hr</span> <span class="o">+</span> <span class="n">sol_t</span><span class="o">.</span><span class="n">min</span><span class="o">/</span><span class="mi">60</span>
    <span class="n">st</span>  <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">&#39;temps&#39;</span><span class="p">,[</span><span class="s">&#39;hr&#39;</span><span class="p">,</span><span class="s">&#39;min&#39;</span><span class="p">,</span><span class="s">&#39;jour&#39;</span><span class="p">])</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">sol_t</span><span class="o">.</span><span class="n">jour</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">brentq</span><span class="p">(</span><span class="n">fct_hl</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">24.0</span><span class="p">,</span><span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">lon</span><span class="p">,</span><span class="n">Lst</span><span class="p">,</span><span class="n">del_h</span><span class="p">,</span><span class="n">tt</span><span class="p">))</span>
    <span class="n">st</span><span class="o">.</span><span class="n">hr</span> <span class="o">=</span> <span class="n">floor</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="n">st</span><span class="o">.</span><span class="n">min</span> <span class="o">=</span> <span class="p">(</span><span class="n">y</span> <span class="o">-</span> <span class="n">st</span><span class="o">.</span><span class="n">hr</span><span class="p">)</span><span class="o">*</span><span class="mf">60.0</span>
    <span class="n">st</span><span class="o">.</span><span class="n">jour</span> <span class="o">=</span> <span class="n">n</span>
    <span class="k">return</span> <span class="n">st</span></div>
<div class="viewcode-block" id="fct_hl"><a class="viewcode-back" href="../python.html#solar_mod.fct_hl">[docs]</a><span class="k">def</span> <span class="nf">fct_hl</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">lon</span><span class="p">,</span><span class="n">Lst</span><span class="p">,</span><span class="n">del_h</span><span class="p">,</span><span class="n">tt</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">z</span>  <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">&#39;temps&#39;</span><span class="p">,[</span><span class="s">&#39;hr&#39;</span><span class="p">,</span><span class="s">&#39;min&#39;</span><span class="p">,</span><span class="s">&#39;jour&#39;</span><span class="p">])</span>
    <span class="n">z</span><span class="o">.</span><span class="n">hr</span> <span class="o">=</span> <span class="n">floor</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">z</span><span class="o">.</span><span class="n">min</span> <span class="o">=</span>   <span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">z</span><span class="o">.</span><span class="n">hr</span><span class="p">)</span><span class="o">*</span><span class="mf">60.0</span>
    <span class="n">z</span><span class="o">.</span><span class="n">jour</span> <span class="o">=</span> <span class="n">n</span>
    <span class="n">z2</span> <span class="o">=</span> <span class="n">heure_solaire</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span><span class="n">Lst</span><span class="p">,</span><span class="n">del_h</span><span class="p">,</span><span class="n">z</span><span class="p">)</span>
    <span class="n">zz</span> <span class="o">=</span> <span class="n">z2</span><span class="o">.</span><span class="n">hr</span><span class="o">+</span><span class="n">z2</span><span class="o">.</span><span class="n">min</span><span class="o">/</span><span class="mf">60.0</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">tt</span><span class="o">-</span><span class="n">zz</span>
    <span class="k">return</span> <span class="n">y</span>
</div>
<div class="viewcode-block" id="fchart"><a class="viewcode-back" href="../python.html#solar_mod.fchart">[docs]</a><span class="k">def</span> <span class="nf">fchart</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">f</span> <span class="o">=</span> <span class="mf">1.029</span><span class="o">*</span><span class="n">Y</span><span class="o">-</span><span class="mf">0.065</span><span class="o">*</span><span class="n">X</span><span class="o">-</span><span class="mf">0.245</span><span class="o">*</span><span class="n">Y</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mf">0.0018</span><span class="o">*</span><span class="n">X</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mf">0.0215</span><span class="o">*</span><span class="n">Y</span><span class="o">**</span><span class="mi">3</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">f</span>
</div>
<div class="viewcode-block" id="fchart_air"><a class="viewcode-back" href="../python.html#solar_mod.fchart_air">[docs]</a><span class="k">def</span> <span class="nf">fchart_air</span><span class="p">(</span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">f</span> <span class="o">=</span> <span class="mf">1.04</span><span class="o">*</span><span class="n">Y</span><span class="o">-</span><span class="mf">0.065</span><span class="o">*</span><span class="n">X</span><span class="o">-</span><span class="mf">0.159</span><span class="o">*</span><span class="n">Y</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mf">0.00187</span><span class="o">*</span><span class="n">X</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="mf">0.0095</span><span class="o">*</span><span class="n">Y</span><span class="o">**</span><span class="mi">3</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">f</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">f</span>
</div>
<div class="viewcode-block" id="duree_jour"><a class="viewcode-back" href="../python.html#solar_mod.duree_jour">[docs]</a><span class="k">def</span> <span class="nf">duree_jour</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">phi</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">jour</span>  <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">&#39;temps&#39;</span><span class="p">,[</span><span class="s">&#39;hr&#39;</span><span class="p">,</span><span class="s">&#39;min&#39;</span><span class="p">,</span><span class="s">&#39;jour&#39;</span><span class="p">])</span>
    <span class="n">delt</span>  <span class="o">=</span> <span class="n">decl_solaire</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="n">com</span> <span class="o">=</span> <span class="o">-</span><span class="n">tand</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">tand</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span>
    <span class="n">om</span> <span class="o">=</span> <span class="n">arccos</span><span class="p">(</span><span class="n">com</span><span class="p">)</span><span class="o">*</span><span class="mf">180.0</span><span class="o">/</span><span class="n">pi</span>
    <span class="n">lever</span> <span class="o">=</span> <span class="n">heure_angle</span><span class="p">(</span><span class="o">-</span><span class="n">om</span><span class="p">)</span>
    <span class="n">lever</span><span class="o">.</span><span class="n">jour</span> <span class="o">=</span> <span class="n">n</span>
    <span class="n">coucher</span> <span class="o">=</span> <span class="n">heure_angle</span><span class="p">(</span><span class="n">om</span><span class="p">)</span>
    <span class="n">coucher</span><span class="o">.</span><span class="n">jour</span> <span class="o">=</span> <span class="n">n</span>
    <span class="n">hr</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">om</span><span class="o">/</span><span class="mf">15.0</span><span class="p">)</span>
    <span class="n">dh</span> <span class="o">=</span> <span class="n">floor</span><span class="p">(</span><span class="n">hr</span><span class="p">)</span>
    <span class="n">dh</span> <span class="o">=</span> <span class="n">floor</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">hr</span><span class="p">)</span>
    <span class="n">dmin</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">hr</span> <span class="o">-</span> <span class="n">dh</span><span class="p">)</span><span class="o">*</span><span class="mi">60</span>
    <span class="n">jour</span><span class="o">.</span><span class="n">hr</span>  <span class="o">=</span> <span class="n">dh</span>
    <span class="n">jour</span><span class="o">.</span><span class="n">min</span> <span class="o">=</span> <span class="n">dmin</span>
    <span class="n">jour</span><span class="o">.</span><span class="n">jour</span> <span class="o">=</span> <span class="n">n</span>
    <span class="k">return</span> <span class="n">lever</span><span class="p">,</span><span class="n">coucher</span><span class="p">,</span><span class="n">jour</span></div>
<div class="viewcode-block" id="duree_jour_mod"><a class="viewcode-back" href="../python.html#solar_mod.duree_jour_mod">[docs]</a><span class="k">def</span> <span class="nf">duree_jour_mod</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">phi</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>


    <span class="n">jour</span>  <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">&#39;temps&#39;</span><span class="p">,[</span><span class="s">&#39;hr&#39;</span><span class="p">,</span><span class="s">&#39;min&#39;</span><span class="p">,</span><span class="s">&#39;jour&#39;</span><span class="p">])</span>
    <span class="n">lever</span>  <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">&#39;temps&#39;</span><span class="p">,[</span><span class="s">&#39;hr&#39;</span><span class="p">,</span><span class="s">&#39;min&#39;</span><span class="p">,</span><span class="s">&#39;jour&#39;</span><span class="p">])</span>
    <span class="n">coucher</span>  <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">&#39;temps&#39;</span><span class="p">,[</span><span class="s">&#39;hr&#39;</span><span class="p">,</span><span class="s">&#39;min&#39;</span><span class="p">,</span><span class="s">&#39;jour&#39;</span><span class="p">])</span>
    <span class="n">aa</span> <span class="o">=</span> <span class="n">cosd</span><span class="p">(</span><span class="mi">90</span><span class="o">+</span><span class="mf">5.0</span><span class="o">/</span><span class="mf">6.0</span><span class="p">)</span>
    <span class="n">delt</span>  <span class="o">=</span> <span class="n">decl_solaire</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="n">com</span> <span class="o">=</span> <span class="p">(</span><span class="n">aa</span><span class="o">-</span><span class="n">sind</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">delt</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="n">cosd</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">delt</span><span class="p">))</span>
    <span class="n">om</span> <span class="o">=</span> <span class="n">arccos</span><span class="p">(</span><span class="n">com</span><span class="p">)</span><span class="o">*</span><span class="mf">180.0</span><span class="o">/</span><span class="n">pi</span>
    <span class="n">hr</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">om</span><span class="o">/</span><span class="mf">15.0</span><span class="p">)</span>
    <span class="n">lever</span> <span class="o">=</span> <span class="n">heure_angle</span><span class="p">(</span><span class="o">-</span><span class="n">om</span><span class="p">)</span>
    <span class="n">lever</span><span class="o">.</span><span class="n">jour</span> <span class="o">=</span> <span class="n">n</span>
    <span class="n">coucher</span> <span class="o">=</span> <span class="n">heure_angle</span><span class="p">(</span><span class="n">om</span><span class="p">)</span>
    <span class="n">coucher</span><span class="o">.</span><span class="n">jour</span> <span class="o">=</span> <span class="n">n</span>
    <span class="n">dh</span> <span class="o">=</span> <span class="n">floor</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">hr</span><span class="p">)</span>
    <span class="n">dmin</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">hr</span> <span class="o">-</span> <span class="n">dh</span><span class="p">)</span><span class="o">*</span><span class="mi">60</span>
    <span class="n">jour</span><span class="o">.</span><span class="n">hr</span>  <span class="o">=</span> <span class="n">dh</span>
    <span class="n">jour</span><span class="o">.</span><span class="n">min</span> <span class="o">=</span> <span class="n">dmin</span>
    <span class="n">jour</span><span class="o">.</span><span class="n">jour</span> <span class="o">=</span> <span class="n">n</span>
    <span class="k">return</span> <span class="n">lever</span><span class="p">,</span><span class="n">coucher</span><span class="p">,</span><span class="n">jour</span>
</div>
<div class="viewcode-block" id="irradiation_extraterrestre_normale"><a class="viewcode-back" href="../python.html#solar_mod.irradiation_extraterrestre_normale">[docs]</a><span class="k">def</span> <span class="nf">irradiation_extraterrestre_normale</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">Gsc</span> <span class="o">=</span> <span class="mi">1367</span>
    <span class="n">G</span> <span class="o">=</span> <span class="n">Gsc</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mf">0.033</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="mf">360.0</span><span class="o">*</span><span class="n">n</span><span class="o">/</span><span class="mf">365.0</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">G</span></div>
<div class="viewcode-block" id="irradiation_extraterrestre"><a class="viewcode-back" href="../python.html#solar_mod.irradiation_extraterrestre">[docs]</a><span class="k">def</span> <span class="nf">irradiation_extraterrestre</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">thez</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">Gsc</span> <span class="o">=</span> <span class="mi">1367</span>
    <span class="n">Gn</span> <span class="o">=</span> <span class="n">Gsc</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="mf">0.033</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="mf">360.0</span><span class="o">*</span><span class="n">n</span><span class="o">/</span><span class="mf">365.0</span><span class="p">))</span>
    <span class="n">G</span> <span class="o">=</span> <span class="n">Gn</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">thez</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">G</span></div>
<div class="viewcode-block" id="irradiation_extraterrestre_jour"><a class="viewcode-back" href="../python.html#solar_mod.irradiation_extraterrestre_jour">[docs]</a><span class="k">def</span> <span class="nf">irradiation_extraterrestre_jour</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">phi</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c">#</span>
    <span class="c">#</span>
    <span class="n">G2</span> <span class="o">=</span> <span class="n">irradiation_extraterrestre_normale</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="n">delt</span>  <span class="o">=</span> <span class="n">decl_solaire</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="n">omes</span> <span class="o">=</span>  <span class="n">angle_sunset</span><span class="p">(</span><span class="n">phi</span><span class="p">,</span><span class="n">delt</span><span class="p">)</span>
    <span class="n">Ho</span> <span class="o">=</span> <span class="mf">24.0</span><span class="o">*</span><span class="mf">3600.0</span><span class="o">*</span><span class="n">G2</span><span class="o">/</span><span class="n">pi</span><span class="o">*</span><span class="p">(</span><span class="n">cosd</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">omes</span><span class="p">)</span><span class="o">+</span><span class="n">pi</span><span class="o">*</span><span class="n">omes</span><span class="o">/</span><span class="mf">180.0</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">delt</span><span class="p">))</span>
    <span class="n">Ho</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">Ho</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Ho</span>
</div>
<div class="viewcode-block" id="irradiation_extraterrestre_horaire"><a class="viewcode-back" href="../python.html#solar_mod.irradiation_extraterrestre_horaire">[docs]</a><span class="k">def</span> <span class="nf">irradiation_extraterrestre_horaire</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">phi</span><span class="p">,</span><span class="n">ome1</span><span class="p">,</span><span class="n">ome2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c"># eq 1.10.4 de DB 3rd edition</span>
    <span class="n">G2</span> <span class="o">=</span> <span class="n">irradiation_extraterrestre_normale</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="n">delt</span>  <span class="o">=</span> <span class="n">decl_solaire</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="n">thez1</span> <span class="o">=</span> <span class="n">zenith_solaire</span><span class="p">(</span><span class="n">phi</span><span class="p">,</span><span class="n">delt</span><span class="p">,</span><span class="n">ome1</span><span class="p">)</span>
    <span class="n">thez2</span> <span class="o">=</span> <span class="n">zenith_solaire</span><span class="p">(</span><span class="n">phi</span><span class="p">,</span><span class="n">delt</span><span class="p">,</span><span class="n">ome2</span><span class="p">)</span>
    <span class="n">ct1</span> <span class="o">=</span> <span class="n">cosd</span><span class="p">(</span><span class="n">thez1</span><span class="p">)</span>
    <span class="n">ct2</span> <span class="o">=</span> <span class="n">cosd</span><span class="p">(</span><span class="n">thez2</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ct1</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">ct2</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
        <span class="n">Io</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">cosd</span><span class="p">(</span><span class="n">thez1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">):</span>
        <span class="c"># ome1 est avant le coucher du soleil</span>
        <span class="c"># % on remplace ome1 par omes</span>
        <span class="n">com</span> <span class="o">=</span> <span class="o">-</span><span class="n">tand</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">tand</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span>
        <span class="n">ome1</span> <span class="o">=</span> <span class="o">-</span><span class="n">arccos</span><span class="p">(</span><span class="n">com</span><span class="p">)</span><span class="o">*</span><span class="mf">180.0</span><span class="o">/</span><span class="n">pi</span>
    <span class="k">elif</span> <span class="n">cosd</span><span class="p">(</span><span class="n">thez2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c"># ome2 est après le coucher du soleil</span>
        <span class="c"># on remplace ome2 par omes</span>
        <span class="n">com</span> <span class="o">=</span> <span class="o">-</span><span class="n">tand</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">tand</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span>
        <span class="n">ome2</span> <span class="o">=</span> <span class="n">arccos</span><span class="p">(</span><span class="n">com</span><span class="p">)</span><span class="o">*</span><span class="mf">180.0</span><span class="o">/</span><span class="n">pi</span>
    <span class="n">Ion</span> <span class="o">=</span> <span class="mi">3600</span><span class="o">*</span><span class="n">G2</span>
    <span class="n">Io</span> <span class="o">=</span> <span class="n">Ion</span><span class="o">*</span><span class="mf">12.0</span><span class="o">/</span><span class="n">pi</span><span class="o">*</span><span class="p">(</span><span class="n">cosd</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">sind</span><span class="p">(</span><span class="n">ome2</span><span class="p">)</span><span class="o">-</span><span class="n">sind</span><span class="p">(</span><span class="n">ome1</span><span class="p">))</span><span class="o">+</span><span class="n">pi</span><span class="o">*</span><span class="p">(</span><span class="n">ome2</span><span class="o">-</span><span class="n">ome1</span><span class="p">)</span><span class="o">/</span><span class="mf">180.0</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">delt</span><span class="p">))</span>
    <span class="n">Io</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">Io</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Io</span></div>
<div class="viewcode-block" id="irradiation_extraterrestre_jour_moyen"><a class="viewcode-back" href="../python.html#solar_mod.irradiation_extraterrestre_jour_moyen">[docs]</a><span class="k">def</span> <span class="nf">irradiation_extraterrestre_jour_moyen</span><span class="p">(</span><span class="n">nmois</span><span class="p">,</span><span class="n">phi</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># nmois jan = 1, dec = 12</span>
    <span class="n">nj1</span> <span class="o">=</span> <span class="n">jjr</span><span class="p">[</span><span class="n">nmois</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span>
    <span class="n">nj2</span> <span class="o">=</span> <span class="n">jnm</span><span class="p">[</span><span class="n">nmois</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">ss</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">nj2</span><span class="p">):</span>
        <span class="n">jm</span> <span class="o">=</span> <span class="n">nj1</span><span class="o">+</span><span class="n">j</span>
        <span class="n">ss</span> <span class="o">=</span> <span class="n">ss</span> <span class="o">+</span> <span class="n">irradiation_extraterrestre_jour</span><span class="p">(</span><span class="n">jm</span><span class="p">,</span><span class="n">phi</span><span class="p">)</span>
    <span class="n">Hob</span> <span class="o">=</span> <span class="n">ss</span><span class="o">/</span><span class="p">(</span><span class="mf">1.0</span><span class="o">*</span><span class="n">nj2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Hob</span>
</div>
<div class="viewcode-block" id="jour_mois_jour_annee"><a class="viewcode-back" href="../python.html#solar_mod.jour_mois_jour_annee">[docs]</a><span class="k">def</span> <span class="nf">jour_mois_jour_annee</span><span class="p">(</span><span class="n">jour</span><span class="p">,</span><span class="n">mois</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c">#</span>
    <span class="c"># fonction qui transforme une date en jour et mois</span>
    <span class="c"># en jour de 1 à 365</span>
    <span class="c"># Les mois doivent s&#39;écrire</span>
    <span class="c"># &#39;jan&#39;;&#39;fev&#39;;&#39;mars&#39;;&#39;avr&#39;;&#39;mai&#39;;&#39;juin&#39;;&#39;juil&#39;;&#39;aout&#39;;&#39;sept&#39;;&#39;oct</span>
    <span class="c"># &#39;;&#39;nov&#39;;&#39;dec&#39;</span>

    <span class="n">ind</span> <span class="o">=</span> <span class="o">-</span><span class="mi">999</span><span class="p">;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">12</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">nom</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">==</span><span class="n">mois</span><span class="p">:</span>
            <span class="n">ind</span> <span class="o">=</span> <span class="n">i</span>
    <span class="k">if</span><span class="p">(</span><span class="n">ind</span> <span class="o">==</span> <span class="o">-</span><span class="mi">999</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;on doit entrer un de ces noms de mois&#39;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">nom</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">jjr</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span> <span class="o">+</span> <span class="n">jour</span>
    <span class="k">return</span> <span class="n">n</span>
</div>
<div class="viewcode-block" id="jour_annee_jour_mois"><a class="viewcode-back" href="../python.html#solar_mod.jour_annee_jour_mois">[docs]</a><span class="k">def</span> <span class="nf">jour_annee_jour_mois</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c">#</span>
    <span class="c"># fonction qui transforme un jour  de 1 à 365</span>
    <span class="c"># à une date en jour du mois</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">cherche_index</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">jjr</span><span class="p">)</span>
    <span class="n">mois</span> <span class="o">=</span> <span class="n">nom</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="n">jour</span> <span class="o">=</span> <span class="n">n</span><span class="o">-</span><span class="n">jjr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">jour</span><span class="p">,</span><span class="n">mois</span>
</div>
<div class="viewcode-block" id="Erbs_horaire"><a class="viewcode-back" href="../python.html#solar_mod.Erbs_horaire">[docs]</a><span class="k">def</span> <span class="nf">Erbs_horaire</span><span class="p">(</span><span class="n">kt</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c">#</span>
    <span class="c"># Erbs correlation horaire (Eq 2.10.1 de DB 3rd edition)</span>
    <span class="k">if</span> <span class="n">kt</span> <span class="o">&lt;=</span> <span class="mf">0.22</span><span class="p">:</span>
        <span class="n">Idt</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">-</span><span class="mf">0.09</span><span class="o">*</span><span class="n">kt</span>
    <span class="k">elif</span> <span class="n">kt</span><span class="o">&lt;=</span> <span class="mf">0.8</span><span class="p">:</span>
        <span class="n">Idt</span> <span class="o">=</span> <span class="mf">0.9511</span><span class="o">-</span><span class="mf">0.1604</span><span class="o">*</span><span class="n">kt</span><span class="o">+</span><span class="mf">4.388</span><span class="o">*</span><span class="n">kt</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="mf">16.638</span><span class="o">*</span><span class="n">kt</span><span class="o">**</span><span class="mi">3</span><span class="o">+</span><span class="mf">12.336</span><span class="o">*</span><span class="n">kt</span><span class="o">**</span><span class="mi">4</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">Idt</span> <span class="o">=</span> <span class="mf">0.165</span>
    <span class="k">return</span> <span class="n">Idt</span></div>
<div class="viewcode-block" id="Erbs_jour"><a class="viewcode-back" href="../python.html#solar_mod.Erbs_jour">[docs]</a><span class="k">def</span> <span class="nf">Erbs_jour</span><span class="p">(</span><span class="n">kt</span><span class="p">,</span><span class="n">ws</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">ws</span> <span class="o">&lt;=</span> <span class="mf">81.4</span><span class="p">:</span>  <span class="c"># ws est en degres</span>
        <span class="k">if</span> <span class="n">kt</span> <span class="o">&lt;=</span> <span class="mf">0.715</span><span class="p">:</span>
            <span class="n">Hdt</span> <span class="o">=</span> <span class="mi">1</span><span class="o">-</span><span class="mf">0.2727</span><span class="o">*</span><span class="n">kt</span><span class="o">+</span><span class="mf">2.4495</span><span class="o">*</span><span class="n">kt</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="mf">11.9514</span><span class="o">*</span><span class="n">kt</span><span class="o">**</span><span class="mi">3</span><span class="o">+</span><span class="mf">9.3879</span><span class="o">*</span><span class="n">kt</span><span class="o">**</span><span class="mi">4</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Hdt</span> <span class="o">=</span> <span class="mf">0.143</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">kt</span> <span class="o">&lt;=</span> <span class="mf">0.722</span><span class="p">:</span>
            <span class="n">Hdt</span> <span class="o">=</span> <span class="mi">1</span><span class="o">+</span><span class="mf">0.2832</span><span class="o">*</span><span class="n">kt</span><span class="o">-</span><span class="mf">2.5557</span><span class="o">*</span><span class="n">kt</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mf">0.8448</span><span class="o">*</span><span class="n">kt</span><span class="o">**</span><span class="mi">3</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Hdt</span> <span class="o">=</span> <span class="mf">0.175</span>
    <span class="k">return</span> <span class="n">Hdt</span>
</div>
<div class="viewcode-block" id="Erbs_mois"><a class="viewcode-back" href="../python.html#solar_mod.Erbs_mois">[docs]</a><span class="k">def</span> <span class="nf">Erbs_mois</span><span class="p">(</span><span class="n">kt</span><span class="p">,</span><span class="n">ws</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">ws</span> <span class="o">&lt;=</span> <span class="mf">81.4</span><span class="p">:</span>  <span class="c"># ws est en degres</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">kt</span> <span class="o">&lt;=</span> <span class="mf">0.8</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">kt</span> <span class="o">&gt;</span> <span class="mf">0.3</span><span class="p">):</span>
            <span class="n">Hdt</span> <span class="o">=</span> <span class="mf">1.391</span><span class="o">-</span><span class="mf">3.56</span><span class="o">*</span><span class="n">kt</span><span class="o">+</span><span class="mf">4.189</span><span class="o">*</span><span class="n">kt</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="mf">2.137</span><span class="o">*</span><span class="n">kt</span><span class="o">**</span><span class="mi">3</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">&#39;Hors limite&#39;</span><span class="p">)</span>
            <span class="n">Hdt</span> <span class="o">=</span> <span class="o">-</span><span class="mi">999</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">kt</span> <span class="o">&lt;=</span> <span class="mf">0.8</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">kt</span> <span class="o">&gt;</span> <span class="mf">0.3</span><span class="p">):</span>
            <span class="n">Hdt</span> <span class="o">=</span>  <span class="mf">1.311</span> <span class="o">-</span> <span class="mf">3.022</span><span class="o">*</span><span class="n">kt</span><span class="o">+</span><span class="mf">3.427</span><span class="o">*</span><span class="n">kt</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="mf">1.821</span><span class="o">*</span><span class="n">kt</span><span class="o">**</span><span class="mi">3</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">&#39;Hors limite&#39;</span><span class="p">)</span>
            <span class="n">Hdt</span> <span class="o">=</span> <span class="o">-</span><span class="mi">999</span>
    <span class="k">return</span> <span class="n">Hdt</span>
</div>
<div class="viewcode-block" id="Collares_total"><a class="viewcode-back" href="../python.html#solar_mod.Collares_total">[docs]</a><span class="k">def</span>  <span class="nf">Collares_total</span><span class="p">(</span><span class="n">ome</span><span class="p">,</span><span class="n">omes</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c">#</span>
    <span class="c"># eq 2.13.2 DB 3rd edition</span>
    <span class="c">#</span>
    <span class="n">num</span> <span class="o">=</span> <span class="n">cosd</span><span class="p">(</span><span class="n">ome</span><span class="p">)</span><span class="o">-</span><span class="n">cosd</span><span class="p">(</span><span class="n">omes</span><span class="p">)</span>
    <span class="n">den</span> <span class="o">=</span> <span class="n">sind</span><span class="p">(</span><span class="n">omes</span><span class="p">)</span><span class="o">-</span><span class="n">pi</span><span class="o">*</span><span class="n">omes</span><span class="o">/</span><span class="mf">180.0</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">omes</span><span class="p">)</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mf">0.409</span><span class="o">+</span><span class="mf">0.5016</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">omes</span><span class="o">-</span><span class="mf">60.0</span><span class="p">)</span>
    <span class="n">b</span> <span class="o">=</span> <span class="mf">0.6609</span><span class="o">-</span><span class="mf">0.4767</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">omes</span><span class="o">-</span><span class="mf">60.0</span><span class="p">)</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">pi</span><span class="o">/</span><span class="mf">24.0</span><span class="o">*</span><span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">ome</span><span class="p">))</span><span class="o">*</span><span class="n">num</span><span class="o">/</span><span class="n">den</span>
    <span class="k">return</span> <span class="n">r</span>
</div>
<div class="viewcode-block" id="Collares_diffus"><a class="viewcode-back" href="../python.html#solar_mod.Collares_diffus">[docs]</a><span class="k">def</span> <span class="nf">Collares_diffus</span><span class="p">(</span><span class="n">ome</span><span class="p">,</span><span class="n">omes</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c">#</span>
    <span class="c"># eq 2.13.4 DB 3rd edition</span>
    <span class="c">#</span>
    <span class="n">num</span> <span class="o">=</span> <span class="n">cosd</span><span class="p">(</span><span class="n">ome</span><span class="p">)</span><span class="o">-</span><span class="n">cosd</span><span class="p">(</span><span class="n">omes</span><span class="p">)</span>
    <span class="n">den</span> <span class="o">=</span> <span class="n">sind</span><span class="p">(</span><span class="n">omes</span><span class="p">)</span><span class="o">-</span><span class="n">pi</span><span class="o">*</span><span class="n">omes</span><span class="o">/</span><span class="mf">180.0</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">omes</span><span class="p">)</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">pi</span><span class="o">/</span><span class="mf">24.0</span><span class="o">*</span><span class="n">num</span><span class="o">/</span><span class="n">den</span>
    <span class="k">return</span> <span class="n">r</span>
</div>
<div class="viewcode-block" id="Calcul_pertes"><a class="viewcode-back" href="../python.html#solar_mod.Calcul_pertes">[docs]</a><span class="k">def</span>  <span class="nf">Calcul_pertes</span><span class="p">(</span><span class="n">T1c</span><span class="p">,</span><span class="n">beta</span><span class="p">,</span><span class="n">H</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">uinf</span><span class="p">,</span><span class="n">Tinfc</span><span class="p">,</span><span class="n">Tskyc</span><span class="p">,</span><span class="n">Lair</span><span class="p">,</span><span class="n">e1</span><span class="p">,</span><span class="n">e2</span><span class="p">,</span><span class="n">e3</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">fct2</span><span class="p">(</span><span class="n">T2c</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">          Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">            param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Notes s&#39;il en as.</span>

<span class="sd">        References</span>
<span class="sd">        ----------</span>
<span class="sd">        La référence.</span>
<span class="sd">    </span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
    
        <span class="c"># système d&#39;équation non-linéraire pour trouver</span>
        <span class="c"># la du vitrage</span>
        <span class="c"># à partir des bilans thermique</span>
        <span class="n">Dt</span> <span class="o">=</span> <span class="n">T1c</span><span class="o">-</span><span class="n">T2c</span>
        <span class="n">T2k</span> <span class="o">=</span> <span class="n">T2c</span> <span class="o">+</span> <span class="mi">273</span>
        <span class="n">Tairk</span> <span class="o">=</span> <span class="p">(</span><span class="n">T1k</span><span class="o">+</span><span class="n">T2k</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
        <span class="c"># Calcul du coef de convection interne</span>
        <span class="n">betas</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">Tairk</span>
        <span class="n">nui</span> <span class="o">=</span> <span class="n">air_prop</span><span class="p">(</span><span class="s">&#39;nu&#39;</span><span class="p">,</span><span class="n">Tairk</span><span class="p">)</span>
        <span class="n">ali</span> <span class="o">=</span> <span class="n">air_prop</span><span class="p">(</span><span class="s">&#39;al&#39;</span><span class="p">,</span><span class="n">Tairk</span><span class="p">)</span>
        <span class="n">ki</span> <span class="o">=</span> <span class="n">air_prop</span><span class="p">(</span><span class="s">&#39;k&#39;</span><span class="p">,</span><span class="n">Tairk</span><span class="p">)</span>
        <span class="n">Ra</span> <span class="o">=</span> <span class="n">g</span><span class="o">*</span><span class="n">betas</span><span class="o">*</span><span class="nb">abs</span><span class="p">(</span><span class="n">Dt</span><span class="p">)</span><span class="o">*</span><span class="n">Lair</span><span class="o">**</span><span class="mi">3</span><span class="o">/</span><span class="p">(</span><span class="n">nui</span><span class="o">*</span><span class="n">ali</span><span class="p">)</span>
        <span class="n">Ra_c</span> <span class="o">=</span> <span class="mf">1708.0</span><span class="o">/</span><span class="n">cosd</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span>
        <span class="n">ct</span> <span class="o">=</span> <span class="n">cosd</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span>
        <span class="n">f1</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.0</span><span class="o">-</span><span class="mf">1708.0</span><span class="o">/</span><span class="p">(</span><span class="n">Ra</span><span class="o">*</span><span class="n">ct</span><span class="p">))</span>
        <span class="n">f2</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">-</span><span class="mi">1708</span><span class="o">*</span><span class="p">(</span><span class="n">sind</span><span class="p">(</span><span class="mf">1.8</span><span class="o">*</span><span class="n">beta</span><span class="p">))</span><span class="o">**</span><span class="mf">1.6</span><span class="o">/</span><span class="p">(</span><span class="n">Ra</span><span class="o">*</span><span class="n">ct</span><span class="p">)</span>
        <span class="n">f3</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,(</span><span class="n">Ra</span><span class="o">*</span><span class="n">ct</span><span class="o">/</span><span class="mi">5830</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">3.0</span><span class="p">)</span><span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>
        <span class="n">Nui</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">+</span> <span class="mf">1.44</span><span class="o">*</span><span class="n">f1</span><span class="o">*</span><span class="n">f2</span><span class="o">+</span><span class="n">f3</span>
        <span class="n">hconvi</span> <span class="o">=</span> <span class="n">Nui</span><span class="o">*</span><span class="n">ki</span><span class="o">/</span><span class="n">Lair</span>
        <span class="c"># Calcul du coefficient de radiation interne</span>
        <span class="n">hradi</span> <span class="o">=</span> <span class="n">sig</span><span class="o">*</span><span class="p">(</span><span class="n">T1k</span><span class="o">+</span><span class="n">T2k</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">T1k</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">T2k</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="n">e1</span><span class="o">+</span><span class="mf">1.0</span><span class="o">/</span><span class="n">e2</span><span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>
        <span class="n">Ripp</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="n">hconvi</span><span class="o">+</span><span class="n">hradi</span><span class="p">)</span>    <span class="c"># résistance équivalente interne</span>
        <span class="c"># Calcul du coef de convection externe</span>
        <span class="n">Recr</span> <span class="o">=</span> <span class="mi">500000</span>
        <span class="n">Textk</span> <span class="o">=</span> <span class="p">(</span><span class="n">T2k</span><span class="o">+</span><span class="n">Tinfk</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span>
        <span class="n">nue</span> <span class="o">=</span> <span class="n">air_prop</span><span class="p">(</span><span class="s">&#39;nu&#39;</span><span class="p">,</span><span class="n">Textk</span><span class="p">)</span>
        <span class="n">ale</span> <span class="o">=</span> <span class="n">air_prop</span><span class="p">(</span><span class="s">&#39;al&#39;</span><span class="p">,</span><span class="n">Textk</span><span class="p">)</span>
        <span class="n">ke</span> <span class="o">=</span> <span class="n">air_prop</span><span class="p">(</span><span class="s">&#39;k&#39;</span><span class="p">,</span><span class="n">Textk</span><span class="p">)</span>
        <span class="n">Pr</span> <span class="o">=</span> <span class="n">air_prop</span><span class="p">(</span><span class="s">&#39;Pr&#39;</span><span class="p">,</span><span class="n">Textk</span><span class="p">)</span>
        <span class="n">Lc</span> <span class="o">=</span> <span class="mi">4</span><span class="o">*</span><span class="n">Ac</span><span class="o">/</span><span class="n">P</span>
        <span class="c">#</span>
        <span class="n">Re</span> <span class="o">=</span> <span class="n">uinf</span><span class="o">*</span><span class="n">Lc</span><span class="o">/</span><span class="n">nue</span>
        <span class="k">if</span> <span class="n">Re</span><span class="o">&lt;</span> <span class="n">Recr</span><span class="p">:</span>
            <span class="n">Nu</span> <span class="o">=</span> <span class="mf">0.86</span><span class="o">*</span><span class="n">sqrt</span><span class="p">(</span><span class="n">Re</span><span class="p">)</span><span class="o">*</span><span class="n">Pr</span><span class="o">**</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">3.0</span><span class="p">)</span>     <span class="c"># laminaire</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">Nu</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.037</span><span class="o">*</span><span class="n">Re</span><span class="o">**</span><span class="p">(</span><span class="mf">4.0</span><span class="o">/</span><span class="mf">5.0</span><span class="p">)</span><span class="o">-</span><span class="mf">871.0</span><span class="p">)</span><span class="o">*</span><span class="n">Pr</span><span class="o">**</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="mf">3.0</span><span class="p">)</span>     <span class="c"># turbulent</span>
        <span class="n">hconve</span> <span class="o">=</span> <span class="n">Nu</span><span class="o">*</span><span class="n">ke</span><span class="o">/</span><span class="n">Lc</span>
        <span class="c"># Calcul du coefficient de radiation interne</span>
        <span class="n">hrade</span> <span class="o">=</span> <span class="n">e3</span><span class="o">*</span><span class="n">sig</span><span class="o">*</span><span class="p">(</span><span class="n">T2k</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">Tskyk</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">T2k</span><span class="o">+</span><span class="n">Tskyk</span><span class="p">)</span>
        <span class="n">Rcpp</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">hconve</span>
        <span class="n">Rrpp</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">hrade</span>
        <span class="c">#</span>
        <span class="c"># fin du calcul des résistances thermiques</span>
        <span class="c"># vérification des bilans thermiques avec hypothese</span>
        <span class="n">qppi</span> <span class="o">=</span> <span class="p">(</span><span class="n">T1c</span> <span class="o">-</span> <span class="n">T2c</span><span class="p">)</span><span class="o">/</span><span class="n">Ripp</span>
        <span class="n">qconvi</span> <span class="o">=</span> <span class="n">hconvi</span><span class="o">*</span><span class="p">(</span><span class="n">T1c</span><span class="o">-</span><span class="n">T2c</span><span class="p">)</span>
        <span class="n">qradi</span> <span class="o">=</span> <span class="n">hradi</span><span class="o">*</span><span class="p">(</span><span class="n">T1c</span><span class="o">-</span><span class="n">T2c</span><span class="p">)</span>
        <span class="n">qppi2</span> <span class="o">=</span> <span class="n">qconvi</span><span class="o">+</span><span class="n">qradi</span>
        <span class="n">qconve</span> <span class="o">=</span> <span class="n">hconve</span><span class="o">*</span><span class="p">(</span><span class="n">T2c</span><span class="o">-</span><span class="n">Tinfc</span><span class="p">)</span>
        <span class="n">qrade</span> <span class="o">=</span> <span class="n">hrade</span><span class="o">*</span><span class="p">(</span><span class="n">T2c</span><span class="o">-</span><span class="n">Tskyc</span><span class="p">)</span>
        <span class="n">qppe</span> <span class="o">=</span> <span class="n">qconve</span><span class="o">+</span><span class="n">qrade</span>


        <span class="c">#</span>
        <span class="c"># Bilan radiatif à la surface externe de la vitre</span>
        <span class="c">#</span>
        <span class="n">C1</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">Ripp</span> <span class="o">+</span>  <span class="mi">1</span><span class="o">/</span><span class="n">Rcpp</span> <span class="o">+</span> <span class="mi">1</span><span class="o">/</span><span class="n">Rrpp</span>
        <span class="n">T2n</span> <span class="o">=</span> <span class="p">(</span><span class="n">T1c</span><span class="o">/</span><span class="n">Ripp</span> <span class="o">+</span> <span class="n">Tinfc</span><span class="o">/</span><span class="n">Rcpp</span><span class="o">+</span><span class="n">Tskyc</span><span class="o">/</span><span class="n">Rrpp</span><span class="p">)</span><span class="o">/</span><span class="n">C1</span>
        <span class="n">qppin</span> <span class="o">=</span> <span class="p">(</span><span class="n">T1c</span> <span class="o">-</span> <span class="n">T2n</span><span class="p">)</span><span class="o">/</span><span class="n">Ripp</span>
        <span class="n">Uh</span> <span class="o">=</span> <span class="n">qppin</span><span class="o">/</span><span class="p">(</span><span class="n">T1c</span><span class="o">-</span><span class="n">Tinfc</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">T2n</span><span class="p">,</span><span class="n">Uh</span>



    <span class="c">#     fonction calculant les pertes du haut d&#39;un capteur à un vitrage</span>
    <span class="c">#     caractérictiques du capteur</span>
    <span class="n">Tskyk</span> <span class="o">=</span> <span class="n">Tskyc</span><span class="o">+</span><span class="mi">273</span>
    <span class="n">T1k</span> <span class="o">=</span> <span class="n">T1c</span><span class="o">+</span><span class="mi">273</span>
    <span class="n">Tinfk</span> <span class="o">=</span> <span class="n">Tinfc</span> <span class="o">+</span> <span class="mi">273</span>
    <span class="n">g</span> <span class="o">=</span> <span class="mf">9.8</span>
    <span class="n">sig</span> <span class="o">=</span> <span class="mf">5.67e-8</span>
    <span class="k">if</span> <span class="n">e3</span> <span class="o">&lt;</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">e3</span> <span class="o">=</span> <span class="n">e2</span>
    <span class="n">Ac</span> <span class="o">=</span> <span class="n">H</span><span class="o">*</span><span class="n">Y</span>
    <span class="n">P</span> <span class="o">=</span> <span class="mf">2.0</span><span class="o">*</span><span class="p">(</span><span class="n">H</span><span class="o">+</span><span class="n">Y</span><span class="p">)</span>
    <span class="n">Lc</span> <span class="o">=</span> <span class="mf">4.0</span><span class="o">*</span><span class="n">Ac</span><span class="o">/</span><span class="n">P</span>
    <span class="c"># valeurs initiales pour le calcul itératif</span>
    <span class="n">T2i</span> <span class="o">=</span> <span class="n">T1c</span><span class="o">-</span><span class="mf">2.0</span>
    <span class="n">ok</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="n">compt</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">delta</span> <span class="o">=</span> <span class="mf">1e-4</span>
    <span class="n">itermax</span> <span class="o">=</span> <span class="mi">200</span>
    <span class="n">err</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="p">(</span><span class="n">ok</span> <span class="o">!=</span> <span class="bp">True</span><span class="p">):</span>
        <span class="n">T2n</span><span class="p">,</span><span class="n">Uh</span> <span class="o">=</span> <span class="n">fct2</span><span class="p">(</span><span class="n">T2i</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">T2i</span><span class="o">-</span><span class="n">T2n</span><span class="p">)</span><span class="o">&lt;</span><span class="n">delta</span><span class="p">):</span>
            <span class="n">ok</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">compt</span> <span class="o">=</span> <span class="n">compt</span><span class="o">+</span><span class="mi">1</span>
            <span class="n">T2i</span> <span class="o">=</span> <span class="n">T2n</span>
            <span class="k">if</span> <span class="n">compt</span> <span class="o">&gt;</span> <span class="n">itermax</span><span class="p">:</span>
                <span class="n">err</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="n">ok</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="n">T2c</span> <span class="o">=</span> <span class="n">T2n</span>
    <span class="k">return</span> <span class="n">T2c</span><span class="p">,</span><span class="n">Uh</span>

</div>
<div class="viewcode-block" id="U_Klein"><a class="viewcode-back" href="../python.html#solar_mod.U_Klein">[docs]</a><span class="k">def</span> <span class="nf">U_Klein</span><span class="p">(</span><span class="n">T_pc</span><span class="p">,</span><span class="n">T_ac</span><span class="p">,</span><span class="n">Slope</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">Emitt</span><span class="p">,</span><span class="n">emig</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># Equation 6.4.9 pour les pertes du haut</span>
    <span class="c"># T_pc : Temperatue de la plaque en Celsius</span>
    <span class="c"># T_ac : Temperatue ambiante  en Celsius</span>
    <span class="c"># Slope : angle beta</span>
    <span class="c"># h : coefficient de convection extérieur</span>
    <span class="c"># Emitt : emissivité de la plaque</span>
    <span class="c"># emig: emissivitée du verre</span>
    <span class="c"># n : nombre de vitre</span>
    <span class="c">#</span>
    <span class="n">T_p</span> <span class="o">=</span> <span class="n">T_pc</span> <span class="o">+</span> <span class="mi">273</span>
    <span class="n">T_a</span> <span class="o">=</span> <span class="n">T_ac</span> <span class="o">+</span> <span class="mi">273</span>
    <span class="n">f</span><span class="o">=</span><span class="p">(</span><span class="mf">1.0</span><span class="o">+</span><span class="mf">0.089</span><span class="o">*</span><span class="n">h</span><span class="o">-</span><span class="mf">0.1166</span><span class="o">*</span><span class="n">h</span><span class="o">*</span><span class="n">Emitt</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mf">1.0</span><span class="o">+</span><span class="mf">0.07866</span><span class="o">*</span><span class="n">n</span><span class="p">)</span>
    <span class="n">e</span><span class="o">=</span><span class="mf">0.430</span><span class="o">*</span><span class="p">(</span><span class="mf">1.0</span><span class="o">-</span><span class="mf">100.0</span><span class="o">/</span><span class="n">T_p</span><span class="p">)</span>
    <span class="k">if</span><span class="p">(</span><span class="n">Slope</span><span class="o">&lt;</span><span class="mf">70.0</span><span class="p">):</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">Slope</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">b</span> <span class="o">=</span> <span class="mf">70.0</span>
    <span class="n">c</span><span class="o">=</span><span class="mf">520.0</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="mf">0.000051</span><span class="o">*</span><span class="n">b</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">x</span><span class="o">=</span><span class="p">(((</span><span class="n">T_p</span><span class="o">-</span><span class="n">T_a</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="n">f</span><span class="p">))</span><span class="o">**</span><span class="n">e</span><span class="p">)</span><span class="o">*</span><span class="n">c</span><span class="o">/</span><span class="n">T_p</span>
    <span class="n">y</span><span class="o">=</span><span class="mf">5.67e-8</span><span class="o">*</span><span class="p">(</span><span class="n">T_p</span><span class="o">+</span><span class="n">T_a</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">T_p</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">T_a</span><span class="o">**</span><span class="mf">2.0</span><span class="p">)</span>
    <span class="n">z</span><span class="o">=</span><span class="p">(</span><span class="n">Emitt</span><span class="o">+</span><span class="mf">0.00591</span><span class="o">*</span><span class="n">n</span><span class="o">*</span><span class="n">h</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">)</span><span class="o">+</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="o">+</span><span class="n">f</span><span class="o">-</span><span class="mi">1</span><span class="o">+</span><span class="mf">0.133</span><span class="o">*</span><span class="n">Emitt</span><span class="p">)</span><span class="o">/</span><span class="n">emig</span><span class="o">-</span><span class="n">n</span>
    <span class="n">Ut</span><span class="o">=</span><span class="p">(</span><span class="n">n</span><span class="o">/</span><span class="n">x</span><span class="o">+</span><span class="mi">1</span><span class="o">/</span><span class="n">h</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">)</span><span class="o">+</span><span class="n">y</span><span class="o">/</span><span class="n">z</span>
    <span class="k">return</span> <span class="n">Ut</span>
</div>
<span class="k">def</span> <span class="nf">Calcul_rendement</span><span class="p">(</span><span class="n">Tfi</span><span class="p">,</span><span class="n">Itw</span><span class="p">,</span><span class="n">Sw</span><span class="p">,</span><span class="n">N</span><span class="p">,</span><span class="n">ka</span><span class="p">,</span><span class="n">deltaa</span><span class="p">,</span><span class="n">D</span><span class="p">,</span><span class="n">Rpjoint</span><span class="p">,</span><span class="n">mp1</span><span class="p">,</span><span class="n">Ucote</span><span class="p">,</span><span class="n">Ubas</span><span class="p">,</span><span class="n">beta</span><span class="p">,</span><span class="n">H</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">uinf</span><span class="p">,</span><span class="n">Tinfc</span><span class="p">,</span><span class="n">Tskyc</span><span class="p">,</span><span class="n">Lair</span><span class="p">,</span><span class="n">e1</span><span class="p">,</span><span class="n">e2</span><span class="p">,</span><span class="n">e3</span><span class="o">=-</span><span class="mi">1</span><span class="p">):</span>
    
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">        -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>


    <span class="k">def</span> <span class="nf">fct2</span><span class="p">(</span><span class="n">Tpc</span><span class="p">,</span><span class="n">Tfo</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        param : float</span>
<span class="sd">            Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        param : float</span>
<span class="sd">            Ce paramètre est...</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Notes s&#39;il en as.</span>

<span class="sd">        References</span>
<span class="sd">        ----------</span>
<span class="sd">        La référence.</span>
<span class="sd">    </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># système d&#39;équation non-linéraire pour trouver</span>
        <span class="c"># la temperature de la plaque</span>
        <span class="c"># à partir des bilans thermique</span>
        <span class="n">T2</span><span class="p">,</span><span class="n">Uhaut</span> <span class="o">=</span>  <span class="n">Calcul_pertes</span><span class="p">(</span><span class="n">Tpc</span><span class="p">,</span><span class="n">beta</span><span class="p">,</span><span class="n">H</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">uinf</span><span class="p">,</span><span class="n">Tinfc</span><span class="p">,</span><span class="n">Tskyc</span><span class="p">,</span><span class="n">Lair</span><span class="p">,</span><span class="n">e1</span><span class="p">,</span><span class="n">e2</span><span class="p">,</span><span class="n">e3</span><span class="p">)</span>
        <span class="n">qhaut</span> <span class="o">=</span> <span class="n">Uhaut</span><span class="o">*</span><span class="p">(</span><span class="n">Tpc</span><span class="o">-</span><span class="n">Tinfc</span><span class="p">)</span>
        <span class="c"># Calcul du Utotal</span>
        <span class="n">UL</span> <span class="o">=</span> <span class="n">Uhaut</span><span class="o">+</span><span class="n">Ubas</span><span class="o">+</span><span class="n">Ucote</span>
        <span class="c"># Calcul des coefficeint F</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">UL</span><span class="o">/</span><span class="p">(</span><span class="n">ka</span><span class="o">*</span><span class="n">deltaa</span><span class="p">))</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">m</span><span class="o">*</span><span class="p">(</span><span class="n">W</span><span class="o">-</span><span class="n">D</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
        <span class="c"># Calcul du rendement d&#39;ailette F</span>
        <span class="n">F</span> <span class="o">=</span> <span class="n">tanh</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="n">x</span>
        <span class="c"># Propriétées de l&#39;eau</span>
        <span class="n">Tf</span> <span class="o">=</span> <span class="p">(</span><span class="n">Tfi</span><span class="o">+</span><span class="n">Tfo</span><span class="p">)</span><span class="o">/</span><span class="mf">2.0</span>
        <span class="n">Tfk</span> <span class="o">=</span> <span class="n">Tf</span><span class="o">+</span><span class="mf">273.0</span>
        <span class="n">mu</span> <span class="o">=</span> <span class="n">eau_prop</span><span class="p">(</span><span class="s">&#39;muf&#39;</span><span class="p">,</span><span class="n">Tfk</span><span class="p">)</span>
        <span class="n">Pr</span> <span class="o">=</span> <span class="n">eau_prop</span><span class="p">(</span><span class="s">&#39;Prf&#39;</span><span class="p">,</span><span class="n">Tfk</span><span class="p">)</span>
        <span class="n">kf</span> <span class="o">=</span> <span class="n">eau_prop</span><span class="p">(</span><span class="s">&#39;kf&#39;</span><span class="p">,</span><span class="n">Tfk</span><span class="p">)</span>
        <span class="n">Cp</span> <span class="o">=</span> <span class="n">eau_prop</span><span class="p">(</span><span class="s">&#39;Cpf&#39;</span><span class="p">,</span><span class="n">Tfk</span><span class="p">)</span>
        <span class="n">Re</span> <span class="o">=</span> <span class="mf">4.0</span><span class="o">*</span><span class="n">mp1</span><span class="o">/</span><span class="p">(</span><span class="n">pi</span><span class="o">*</span><span class="n">D</span><span class="o">*</span><span class="n">mu</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">Re</span><span class="o">&lt;</span><span class="mi">2300</span><span class="p">:</span>      <span class="c"># laminaire</span>
            <span class="n">Nud</span> <span class="o">=</span> <span class="mf">3.66</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">f</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.790</span><span class="o">*</span><span class="n">log</span><span class="p">(</span><span class="n">Re</span><span class="p">)</span><span class="o">-</span><span class="mf">1.64</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">Nud</span> <span class="o">=</span> <span class="p">(</span><span class="n">f</span><span class="o">/</span><span class="mf">8.0</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">Re</span><span class="o">-</span><span class="mf">1000.0</span><span class="p">)</span><span class="o">*</span><span class="n">Pr</span><span class="o">/</span><span class="p">(</span><span class="mf">1.0</span><span class="o">+</span><span class="mf">12.7</span><span class="o">*</span><span class="n">sqrt</span><span class="p">(</span><span class="n">f</span><span class="o">/</span><span class="mf">8.0</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">Pr</span><span class="o">**</span><span class="p">(</span><span class="mf">2.0</span><span class="o">/</span><span class="mf">3.0</span><span class="p">)</span><span class="o">-</span><span class="mf">1.0</span><span class="p">))</span>
            <span class="n">Nud</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="n">Nud</span><span class="p">)</span>
        <span class="n">hf</span> <span class="o">=</span> <span class="n">Nud</span><span class="o">*</span><span class="n">kf</span><span class="o">/</span><span class="n">D</span>
        <span class="n">Rpconv</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="n">hf</span><span class="o">*</span><span class="n">pi</span><span class="o">*</span><span class="n">D</span><span class="p">)</span>
        <span class="n">den</span> <span class="o">=</span> <span class="n">W</span><span class="o">*</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="n">UL</span><span class="o">*</span><span class="p">(</span><span class="n">D</span><span class="o">+</span><span class="p">(</span><span class="n">W</span><span class="o">-</span><span class="n">D</span><span class="p">)</span><span class="o">*</span><span class="n">F</span><span class="p">))</span><span class="o">+</span><span class="n">Rpjoint</span><span class="o">+</span><span class="n">Rpconv</span><span class="p">)</span>
        <span class="c"># Calcul du rendement d&#39;absorbeur F&#39;</span>
        <span class="n">Fp</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="n">UL</span><span class="o">*</span><span class="n">den</span><span class="p">)</span>
        <span class="n">zz</span> <span class="o">=</span> <span class="n">UL</span><span class="o">*</span><span class="n">Ac</span><span class="o">*</span><span class="n">Fp</span><span class="o">/</span><span class="p">(</span><span class="n">mpt</span><span class="o">*</span><span class="n">Cp</span><span class="p">)</span>
        <span class="c"># Calcul du facteur de récupération FR</span>
        <span class="n">Fpp</span> <span class="o">=</span> <span class="mi">1</span><span class="o">/</span><span class="n">zz</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">zz</span><span class="p">))</span>
        <span class="n">Fr</span> <span class="o">=</span> <span class="n">Fp</span><span class="o">*</span><span class="n">Fpp</span>
        <span class="n">UDT</span> <span class="o">=</span> <span class="n">UL</span><span class="o">*</span><span class="p">(</span><span class="n">Tfi</span><span class="o">-</span><span class="n">Tinfc</span><span class="p">)</span>            <span class="c"># pertes en W/m2</span>
        <span class="n">qupp</span> <span class="o">=</span> <span class="n">Fr</span><span class="o">*</span><span class="p">(</span><span class="n">Sw</span><span class="o">-</span><span class="n">UDT</span><span class="p">)</span>
        <span class="n">qupp2</span> <span class="o">=</span><span class="p">(</span><span class="n">Sw</span><span class="o">-</span><span class="n">UL</span><span class="o">*</span><span class="p">(</span><span class="n">Tpc</span><span class="o">-</span><span class="n">Tinfc</span><span class="p">))</span>
        <span class="n">qu</span> <span class="o">=</span> <span class="n">qupp</span><span class="o">*</span><span class="n">Ac</span>
        <span class="n">rend</span> <span class="o">=</span> <span class="n">qupp</span><span class="o">/</span><span class="n">Itw</span>
        <span class="c"># Calcul des nouvelles températures</span>
        <span class="n">Tfo</span> <span class="o">=</span> <span class="n">Tfi</span> <span class="o">+</span> <span class="n">qu</span><span class="o">/</span><span class="p">(</span><span class="n">mpt</span><span class="o">*</span><span class="n">Cp</span><span class="p">)</span>
        <span class="n">Tf</span> <span class="o">=</span> <span class="n">Tfi</span><span class="o">+</span><span class="n">qupp</span><span class="o">/</span><span class="p">(</span><span class="n">Fr</span><span class="o">*</span><span class="n">UL</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">Fpp</span><span class="p">)</span>
        <span class="n">Tf2</span> <span class="o">=</span> <span class="p">(</span><span class="n">Tfi</span><span class="o">+</span><span class="n">Tfo</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
        <span class="n">Tpn</span> <span class="o">=</span> <span class="n">Tfi</span><span class="o">+</span><span class="n">qupp</span><span class="o">/</span><span class="p">(</span><span class="n">Fr</span><span class="o">*</span><span class="n">UL</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">Fr</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Tpn</span><span class="p">,</span><span class="n">Tfo</span><span class="p">,</span><span class="n">qupp</span><span class="p">,</span><span class="n">rend</span>

    <span class="c">#     fonction calculant le rendement d&#39;un capteur à partir de son modele theorique et la temperature d&#39;entree</span>
    <span class="n">W</span> <span class="o">=</span> <span class="n">H</span><span class="o">/</span><span class="n">N</span>
    <span class="n">Ac</span> <span class="o">=</span> <span class="n">H</span><span class="o">*</span><span class="n">Y</span>
    <span class="n">mpt</span> <span class="o">=</span> <span class="n">mp1</span><span class="o">*</span><span class="n">N</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">Itw</span> <span class="o">&lt;</span> <span class="mf">1e-3</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="n">mp1</span> <span class="o">&lt;</span> <span class="mf">1e-6</span><span class="p">)):</span> <span class="c"># Si on n&#39;a pas assez de soleil ou si le debit est nul, on arrete les calculs</span>
        <span class="n">rend</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">qu</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">Tfo</span> <span class="o">=</span> <span class="n">Tinfc</span>
        <span class="n">Tpn</span> <span class="o">=</span> <span class="n">Tfo</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ok</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">compt</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="mf">1e-4</span>
        <span class="n">itermax</span> <span class="o">=</span> <span class="mi">200</span>
        <span class="n">err</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">Tfo</span> <span class="o">=</span> <span class="n">Tfi</span> <span class="o">+</span> <span class="mf">2.0</span>          <span class="c"># valeur initiale pour le processus iteratif</span>
        <span class="n">Tpc</span> <span class="o">=</span> <span class="n">Tfi</span> <span class="o">+</span> <span class="mf">10.0</span>        <span class="c"># valeur initiale pour le processus iteratif</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">ok</span> <span class="o">!=</span> <span class="bp">True</span><span class="p">):</span>
            <span class="n">Tpn</span><span class="p">,</span><span class="n">Tfo</span><span class="p">,</span><span class="n">qupp</span><span class="p">,</span><span class="n">rend</span> <span class="o">=</span> <span class="n">fct2</span><span class="p">(</span><span class="n">Tpc</span><span class="p">,</span><span class="n">Tfo</span><span class="p">)</span>
            <span class="k">if</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">Tpn</span><span class="o">-</span><span class="n">Tpc</span><span class="p">)</span><span class="o">&lt;</span><span class="n">delta</span><span class="p">):</span>
                <span class="n">ok</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">compt</span> <span class="o">=</span> <span class="n">compt</span><span class="o">+</span><span class="mi">1</span>
                <span class="n">Tpc</span> <span class="o">=</span> <span class="n">Tpn</span>
                <span class="k">if</span> <span class="n">compt</span> <span class="o">&gt;</span> <span class="n">itermax</span><span class="p">:</span>
                    <span class="n">err</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="n">ok</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">return</span> <span class="n">rend</span><span class="p">,</span><span class="n">qupp</span><span class="p">,</span><span class="n">Tpn</span><span class="p">,</span><span class="n">Tfo</span>

<div class="viewcode-block" id="calcul_Rb"><a class="viewcode-back" href="../python.html#solar_mod.calcul_Rb">[docs]</a><span class="k">def</span> <span class="nf">calcul_Rb</span><span class="p">(</span><span class="n">phi</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">ome</span><span class="p">,</span><span class="n">beta</span><span class="p">,</span><span class="n">gam</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
<span class="c">#% On calcule Rb avec 1.8.1 (DB 3rd edition)</span>
<span class="c"># l&#39;heure comprend le lever ou le coucher du soleil, on prend la moyenne</span>
<span class="c"># sur l&#39;heure (2.14.6) (DB 3rd edition</span>
<span class="c"># sol_t: heure solaire</span>
    <span class="n">hr1</span>  <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">&#39;temps&#39;</span><span class="p">,[</span><span class="s">&#39;hr&#39;</span><span class="p">,</span><span class="s">&#39;min&#39;</span><span class="p">,</span><span class="s">&#39;jour&#39;</span><span class="p">])</span>
    <span class="n">hr2</span>  <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">&#39;temps&#39;</span><span class="p">,[</span><span class="s">&#39;hr&#39;</span><span class="p">,</span><span class="s">&#39;min&#39;</span><span class="p">,</span><span class="s">&#39;jour&#39;</span><span class="p">])</span>
    <span class="n">delt</span>  <span class="o">=</span> <span class="n">decl_solaire</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>    <span class="c"># calcul de la declinaison solaire</span>
    <span class="n">lever</span><span class="p">,</span><span class="n">coucher</span><span class="p">,</span><span class="n">jour</span> <span class="o">=</span> <span class="n">duree_jour</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">phi</span><span class="p">)</span>
    <span class="n">the</span> <span class="o">=</span> <span class="n">normale_solaire</span><span class="p">(</span><span class="n">delt</span><span class="p">,</span><span class="n">phi</span><span class="p">,</span><span class="n">ome</span><span class="p">,</span><span class="n">beta</span><span class="p">,</span><span class="n">gam</span><span class="p">)</span>
    <span class="n">thez</span> <span class="o">=</span> <span class="n">zenith_solaire</span><span class="p">(</span><span class="n">phi</span><span class="p">,</span><span class="n">delt</span><span class="p">,</span><span class="n">ome</span><span class="p">)</span>
    <span class="n">Rb</span> <span class="o">=</span> <span class="n">cosd</span><span class="p">(</span><span class="n">the</span><span class="p">)</span><span class="o">/</span><span class="n">cosd</span><span class="p">(</span><span class="n">thez</span><span class="p">)</span>
    <span class="n">sol_t</span> <span class="o">=</span> <span class="n">heure_angle</span><span class="p">(</span><span class="n">ome</span><span class="p">)</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">sol_t</span><span class="o">.</span><span class="n">hr</span> <span class="o">==</span> <span class="n">lever</span><span class="o">.</span><span class="n">hr</span><span class="p">):</span>
        <span class="c"># cas ou l&#39;heure demandée comprend le lever du soleil</span>
        <span class="n">ome1</span> <span class="o">=</span> <span class="n">angle_horaire</span><span class="p">(</span><span class="n">lever</span><span class="p">)</span>
        <span class="n">hr2</span><span class="o">.</span><span class="n">hr</span> <span class="o">=</span> <span class="n">sol_t</span><span class="o">.</span><span class="n">hr</span><span class="o">+</span><span class="mi">1</span>
        <span class="n">hr2</span><span class="o">.</span><span class="n">min</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">ome2</span> <span class="o">=</span> <span class="n">angle_horaire</span><span class="p">(</span><span class="n">hr2</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="n">sind</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span><span class="o">-</span><span class="n">sind</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">gam</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">ome2</span><span class="o">-</span><span class="n">ome1</span><span class="p">)</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mf">180.0</span> \
           <span class="o">+</span> <span class="p">(</span><span class="n">cosd</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span> <span class="o">+</span> <span class="n">cosd</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">gam</span><span class="p">))</span> \
           <span class="o">*</span><span class="p">(</span><span class="n">sind</span><span class="p">(</span><span class="n">ome2</span><span class="p">)</span><span class="o">-</span><span class="n">sind</span><span class="p">(</span><span class="n">ome1</span><span class="p">))</span><span class="o">-</span><span class="n">cosd</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">gam</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">cosd</span><span class="p">(</span><span class="n">ome2</span><span class="p">)</span><span class="o">-</span><span class="n">cosd</span><span class="p">(</span><span class="n">ome1</span><span class="p">))</span>
        <span class="n">b</span> <span class="o">=</span>  <span class="n">cosd</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">sind</span><span class="p">(</span><span class="n">ome2</span><span class="p">)</span><span class="o">-</span><span class="n">sind</span><span class="p">(</span><span class="n">ome1</span><span class="p">))</span> <span class="o">+</span> <span class="n">sind</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="n">pi</span><span class="o">*</span><span class="p">(</span><span class="n">ome2</span><span class="o">-</span><span class="n">ome1</span><span class="p">)</span><span class="o">/</span><span class="mf">180.0</span>
        <span class="k">if</span> <span class="n">b</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">gg</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">Rb</span> <span class="o">=</span> <span class="n">a</span><span class="o">/</span><span class="n">b</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">sol_t</span><span class="o">.</span><span class="n">hr</span> <span class="o">==</span> <span class="n">coucher</span><span class="o">.</span><span class="n">hr</span><span class="p">):</span>
    <span class="c"># cas ou l&#39;heure demandée comprend le coucher du soleil</span>
        <span class="n">ome2</span> <span class="o">=</span> <span class="n">angle_horaire</span><span class="p">(</span><span class="n">coucher</span><span class="p">)</span>
        <span class="n">hr1</span><span class="o">.</span><span class="n">hr</span> <span class="o">=</span> <span class="n">sol_t</span><span class="o">.</span><span class="n">hr</span>
        <span class="n">hr1</span><span class="o">.</span><span class="n">min</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="n">ome1</span> <span class="o">=</span> <span class="n">angle_horaire</span><span class="p">(</span><span class="n">hr1</span><span class="p">)</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">ome2</span><span class="o">-</span><span class="n">ome1</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">5</span><span class="p">):</span>
            <span class="n">Rb</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="n">sind</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span><span class="o">-</span><span class="n">sind</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">gam</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">ome2</span><span class="o">-</span><span class="n">ome1</span><span class="p">)</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span> \
               <span class="o">+</span> <span class="p">(</span><span class="n">cosd</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span> <span class="o">+</span> <span class="n">cosd</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">gam</span><span class="p">))</span> \
               <span class="o">*</span><span class="p">(</span><span class="n">sind</span><span class="p">(</span><span class="n">ome2</span><span class="p">)</span><span class="o">-</span><span class="n">sind</span><span class="p">(</span><span class="n">ome1</span><span class="p">))</span><span class="o">-</span><span class="n">cosd</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">gam</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">cosd</span><span class="p">(</span><span class="n">ome2</span><span class="p">)</span><span class="o">-</span><span class="n">cosd</span><span class="p">(</span><span class="n">ome1</span><span class="p">))</span>
            <span class="n">b</span> <span class="o">=</span>  <span class="n">cosd</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">sind</span><span class="p">(</span><span class="n">ome2</span><span class="p">)</span><span class="o">-</span><span class="n">sind</span><span class="p">(</span><span class="n">ome1</span><span class="p">))</span> <span class="o">+</span> <span class="n">sind</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="n">pi</span><span class="o">*</span><span class="p">(</span><span class="n">ome2</span><span class="o">-</span><span class="n">ome1</span><span class="p">)</span><span class="o">/</span><span class="mf">180.0</span>
            <span class="n">Rb</span> <span class="o">=</span> <span class="n">a</span><span class="o">/</span><span class="n">b</span>
    <span class="n">Rb</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">Rb</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Rb</span>

</div>
<div class="viewcode-block" id="calcul_Rb_mois"><a class="viewcode-back" href="../python.html#solar_mod.calcul_Rb_mois">[docs]</a><span class="k">def</span>  <span class="nf">calcul_Rb_mois</span><span class="p">(</span><span class="n">phi</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">beta</span><span class="p">,</span><span class="n">gam</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>


    <span class="c"># On calcule Rbb avec 2.19.3a (DB 3rd edition)</span>
    <span class="n">delt</span>  <span class="o">=</span> <span class="n">decl_solaire</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="n">ome</span> <span class="o">=</span> <span class="n">angle_sunset</span><span class="p">(</span><span class="n">phi</span><span class="p">,</span><span class="n">delt</span><span class="p">)</span>
    <span class="n">ome1</span> <span class="o">=</span> <span class="n">arccosd</span><span class="p">(</span><span class="o">-</span><span class="n">tand</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">tand</span><span class="p">(</span><span class="n">delt</span><span class="p">))</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">cosd</span><span class="p">(</span><span class="n">gam</span><span class="p">))</span>
    <span class="n">ome2</span> <span class="o">=</span> <span class="n">arccosd</span><span class="p">(</span><span class="o">-</span><span class="n">tand</span><span class="p">(</span><span class="n">phi</span><span class="o">-</span><span class="n">s</span><span class="o">*</span><span class="n">beta</span><span class="p">)</span><span class="o">*</span><span class="n">tand</span><span class="p">(</span><span class="n">delt</span><span class="p">))</span>
    <span class="n">omes</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">ome1</span><span class="p">,</span><span class="n">ome2</span><span class="p">)</span>
    <span class="n">num</span> <span class="o">=</span> <span class="n">sind</span><span class="p">(</span><span class="n">omes</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">cosd</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span><span class="o">+</span><span class="n">sind</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">gam</span><span class="p">))</span><span class="o">+</span> \
        <span class="n">sind</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">sind</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span><span class="o">-</span><span class="n">cosd</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">gam</span><span class="p">))</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="o">*</span><span class="n">omes</span>
    <span class="n">den</span> <span class="o">=</span> <span class="n">cosd</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">cosd</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">ome</span><span class="p">)</span><span class="o">+</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="o">*</span><span class="n">ome</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">delt</span><span class="p">)</span>
    <span class="n">Rbm</span> <span class="o">=</span> <span class="n">num</span><span class="o">/</span><span class="n">den</span>
    <span class="k">return</span> <span class="n">Rbm</span>

</div>
<div class="viewcode-block" id="modele_isotropique"><a class="viewcode-back" href="../python.html#solar_mod.modele_isotropique">[docs]</a><span class="k">def</span> <span class="nf">modele_isotropique</span><span class="p">(</span><span class="n">I</span><span class="p">,</span><span class="n">Ib</span><span class="p">,</span><span class="n">Id</span><span class="p">,</span><span class="n">beta</span><span class="p">,</span><span class="n">Rb</span><span class="p">,</span><span class="n">rhog</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">Ibt</span> <span class="o">=</span> <span class="n">Ib</span><span class="o">*</span><span class="n">Rb</span>
    <span class="n">Idt</span> <span class="o">=</span> <span class="n">Id</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">cosd</span><span class="p">(</span><span class="n">beta</span><span class="p">))</span><span class="o">/</span><span class="mf">2.0</span>
    <span class="n">Irt</span> <span class="o">=</span> <span class="n">I</span><span class="o">*</span><span class="n">rhog</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">cosd</span><span class="p">(</span><span class="n">beta</span><span class="p">))</span><span class="o">/</span><span class="mf">2.0</span>
    <span class="n">It</span> <span class="o">=</span>  <span class="n">Ibt</span><span class="o">+</span><span class="n">Idt</span><span class="o">+</span><span class="n">Irt</span>
    <span class="k">return</span> <span class="n">It</span><span class="p">,</span><span class="n">Ibt</span><span class="p">,</span><span class="n">Idt</span><span class="p">,</span><span class="n">Irt</span></div>
<div class="viewcode-block" id="modele_hay_davis"><a class="viewcode-back" href="../python.html#solar_mod.modele_hay_davis">[docs]</a><span class="k">def</span> <span class="nf">modele_hay_davis</span><span class="p">(</span><span class="n">I</span><span class="p">,</span><span class="n">Ib</span><span class="p">,</span><span class="n">Id</span><span class="p">,</span><span class="n">beta</span><span class="p">,</span><span class="n">Rb</span><span class="p">,</span><span class="n">rhog</span><span class="p">,</span><span class="n">Io</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">Io</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">Ai</span> <span class="o">=</span> <span class="n">Ib</span><span class="o">/</span><span class="n">Io</span>
        <span class="n">Ibt</span> <span class="o">=</span> <span class="p">(</span><span class="n">Ib</span><span class="o">+</span><span class="n">Id</span><span class="o">*</span><span class="n">Ai</span><span class="p">)</span><span class="o">*</span><span class="n">Rb</span>
        <span class="n">Idt</span> <span class="o">=</span> <span class="n">Id</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">Ai</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">cosd</span><span class="p">(</span><span class="n">beta</span><span class="p">))</span><span class="o">/</span><span class="mf">2.0</span>
        <span class="n">Irt</span> <span class="o">=</span> <span class="n">I</span><span class="o">*</span><span class="n">rhog</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">cosd</span><span class="p">(</span><span class="n">beta</span><span class="p">))</span><span class="o">/</span><span class="mf">2.0</span>
        <span class="n">It</span> <span class="o">=</span>  <span class="n">Ibt</span><span class="o">+</span><span class="n">Idt</span><span class="o">+</span><span class="n">Irt</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">Ibt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">Idt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">Irt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">It</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="n">It</span><span class="p">,</span><span class="n">Ibt</span><span class="p">,</span><span class="n">Idt</span><span class="p">,</span><span class="n">Irt</span></div>
<span class="k">def</span> <span class="nf">modele_hdkr</span><span class="p">(</span><span class="n">I</span><span class="p">,</span><span class="n">Ib</span><span class="p">,</span><span class="n">Id</span><span class="p">,</span><span class="n">beta</span><span class="p">,</span><span class="n">Rb</span><span class="p">,</span><span class="n">rhog</span><span class="p">,</span><span class="n">Io</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">Io</span> <span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">I</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)):</span>
        <span class="n">Ai</span> <span class="o">=</span> <span class="n">Ib</span><span class="o">/</span><span class="n">Io</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">Ib</span><span class="o">/</span><span class="n">I</span><span class="p">)</span>
        <span class="n">Ibt</span> <span class="o">=</span> <span class="p">(</span><span class="n">Ib</span><span class="o">+</span><span class="n">Id</span><span class="o">*</span><span class="n">Ai</span><span class="p">)</span><span class="o">*</span><span class="n">Rb</span><span class="p">;</span>
        <span class="n">Idt</span> <span class="o">=</span> <span class="n">Id</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">Ai</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">cosd</span><span class="p">(</span><span class="n">beta</span><span class="p">))</span><span class="o">/</span><span class="mf">2.0</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">f</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">beta</span><span class="o">/</span><span class="mf">2.0</span><span class="p">)</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">Irt</span> <span class="o">=</span> <span class="n">I</span><span class="o">*</span><span class="n">rhog</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">cosd</span><span class="p">(</span><span class="n">beta</span><span class="p">))</span><span class="o">/</span><span class="mf">2.0</span>
        <span class="n">It</span> <span class="o">=</span>  <span class="n">Ibt</span><span class="o">+</span><span class="n">Idt</span><span class="o">+</span><span class="n">Irt</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">Ibt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">Idt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">Irt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">It</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="n">It</span><span class="p">,</span><span class="n">Ibt</span><span class="p">,</span><span class="n">Idt</span><span class="p">,</span><span class="n">Irt</span>


<div class="viewcode-block" id="modele_perez"><a class="viewcode-back" href="../python.html#solar_mod.modele_perez">[docs]</a><span class="k">def</span> <span class="nf">modele_perez</span><span class="p">(</span><span class="n">I</span><span class="p">,</span><span class="n">Ib</span><span class="p">,</span><span class="n">Id</span><span class="p">,</span><span class="n">beta</span><span class="p">,</span><span class="n">Rb</span><span class="p">,</span><span class="n">rhog</span><span class="p">,</span><span class="n">Io</span><span class="p">,</span><span class="n">Ion</span><span class="p">,</span><span class="n">thez</span><span class="p">,</span><span class="n">the</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c">#</span>
    <span class="c"># I irradiation sur plan horizontal</span>
    <span class="c">#% Io irradiation sur plan horizontal extraterrestre</span>
    <span class="c">#beta angle du capteur</span>
    <span class="c"># Rb : rapprt plan incline aur plan horizontal</span>
    <span class="c"># rhos : albedo</span>
    <span class="c"># thez : zennith sozire</span>
    <span class="c"># the : angle entre normale capteur et radiation directe</span>
    <span class="c">#</span>
    <span class="c"># eq 2.16.14 DB 3rd edition</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">Io</span> <span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">I</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)):</span>
        <span class="n">a</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">cosd</span><span class="p">(</span><span class="n">the</span><span class="p">))</span>
        <span class="n">b</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">cosd</span><span class="p">(</span><span class="mi">85</span><span class="p">),</span><span class="n">cosd</span><span class="p">(</span><span class="n">thez</span><span class="p">))</span>
        <span class="n">epv</span> <span class="o">=</span> <span class="n">array</span><span class="p">([</span><span class="mf">1.065</span><span class="p">,</span><span class="mf">1.230</span><span class="p">,</span><span class="mf">1.500</span><span class="p">,</span><span class="mf">1.950</span><span class="p">,</span><span class="mf">2.800</span><span class="p">,</span><span class="mf">4.500</span><span class="p">,</span><span class="mf">6.200</span><span class="p">])</span>
        <span class="n">P11</span> <span class="o">=</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.008</span><span class="p">,</span><span class="mf">0.13</span><span class="p">,</span><span class="mf">0.33</span><span class="p">,</span><span class="mf">0.568</span><span class="p">,</span><span class="mf">0.873</span><span class="p">,</span><span class="mf">1.132</span><span class="p">,</span><span class="mf">1.060</span><span class="p">,</span><span class="mf">0.678</span><span class="p">])</span>
        <span class="n">P12</span> <span class="o">=</span><span class="n">array</span><span class="p">([</span><span class="mf">0.588</span><span class="p">,</span><span class="mf">0.683</span><span class="p">,</span><span class="mf">0.487</span><span class="p">,</span><span class="mf">0.187</span><span class="p">,</span><span class="o">-</span><span class="mf">0.392</span><span class="p">,</span><span class="o">-</span><span class="mf">1.237</span><span class="p">,</span><span class="o">-</span><span class="mf">1.6</span><span class="p">,</span><span class="o">-</span><span class="mf">0.327</span><span class="p">])</span>
        <span class="n">P13</span> <span class="o">=</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.062</span><span class="p">,</span><span class="o">-</span><span class="mf">0.151</span><span class="p">,</span><span class="o">-</span><span class="mf">0.221</span><span class="p">,</span><span class="o">-</span><span class="mf">0.295</span><span class="p">,</span><span class="o">-</span><span class="mf">0.362</span><span class="p">,</span><span class="o">-</span><span class="mf">0.412</span><span class="p">,</span><span class="o">-</span><span class="mf">0.359</span><span class="p">,</span><span class="o">-</span><span class="mf">0.250</span><span class="p">])</span>
        <span class="n">P21</span> <span class="o">=</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.06</span><span class="p">,</span><span class="o">-</span><span class="mf">0.019</span><span class="p">,</span><span class="mf">0.055</span><span class="p">,</span><span class="mf">0.109</span><span class="p">,</span><span class="mf">0.226</span><span class="p">,</span><span class="mf">0.288</span><span class="p">,</span><span class="mf">0.264</span><span class="p">,</span><span class="mf">0.156</span><span class="p">])</span>
        <span class="n">P22</span> <span class="o">=</span><span class="n">array</span><span class="p">([</span><span class="mf">0.072</span><span class="p">,</span><span class="mf">0.066</span><span class="p">,</span><span class="o">-</span><span class="mf">0.064</span><span class="p">,</span><span class="o">-</span><span class="mf">0.152</span><span class="p">,</span><span class="o">-</span><span class="mf">0.462</span><span class="p">,</span><span class="o">-</span><span class="mf">0.823</span><span class="p">,</span><span class="o">-</span><span class="mf">1.127</span><span class="p">,</span><span class="o">-</span><span class="mf">1.377</span><span class="p">])</span>
        <span class="n">P23</span> <span class="o">=</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mf">0.022</span><span class="p">,</span><span class="o">-</span><span class="mf">0.029</span><span class="p">,</span><span class="o">-</span><span class="mf">0.026</span><span class="p">,</span><span class="mf">0.014</span><span class="p">,</span><span class="mf">0.001</span><span class="p">,</span><span class="mf">0.056</span><span class="p">,</span><span class="mf">0.131</span><span class="p">,</span><span class="mf">0.251</span><span class="p">])</span>
        <span class="n">m</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">/</span><span class="n">b</span>
        <span class="n">Ibn</span> <span class="o">=</span> <span class="n">m</span><span class="o">*</span><span class="n">Ib</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">Ib</span><span class="o">/</span><span class="n">I</span><span class="p">)</span>
        <span class="n">Ai</span> <span class="o">=</span> <span class="n">Ib</span><span class="o">/</span><span class="n">Io</span>
        <span class="n">c1</span> <span class="o">=</span> <span class="mf">5.535e-6</span>
        <span class="k">if</span> <span class="n">Id</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">ep</span> <span class="o">=</span>  <span class="p">((</span><span class="n">Id</span><span class="o">+</span><span class="n">Ibn</span><span class="p">)</span><span class="o">/</span><span class="n">Id</span><span class="o">+</span><span class="n">c1</span><span class="o">*</span><span class="n">thez</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">c1</span><span class="o">*</span><span class="n">thez</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">cherche_index</span><span class="p">(</span><span class="n">ep</span><span class="p">,</span><span class="n">epv</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">P11</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
        <span class="n">f11</span> <span class="o">=</span> <span class="n">P11</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">f12</span> <span class="o">=</span> <span class="n">P12</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">f13</span> <span class="o">=</span> <span class="n">P13</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">f21</span> <span class="o">=</span> <span class="n">P21</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">f22</span> <span class="o">=</span> <span class="n">P22</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">f23</span> <span class="o">=</span> <span class="n">P23</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="n">Id</span><span class="o">/</span><span class="n">Io</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="n">m</span><span class="o">*</span><span class="n">Id</span><span class="o">/</span><span class="n">Ion</span>
        <span class="n">F1</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">f11</span><span class="o">+</span><span class="n">f12</span><span class="o">*</span><span class="n">delta</span><span class="o">+</span><span class="n">pi</span><span class="o">*</span><span class="n">thez</span><span class="o">/</span><span class="mf">180.0</span><span class="o">*</span><span class="n">f13</span><span class="p">)</span>
        <span class="n">F2</span> <span class="o">=</span> <span class="n">f21</span><span class="o">+</span><span class="n">f22</span><span class="o">*</span><span class="n">delta</span><span class="o">+</span><span class="n">pi</span><span class="o">*</span><span class="n">thez</span><span class="o">/</span><span class="mf">180.0</span><span class="o">*</span><span class="n">f23</span>
        <span class="n">Ibt</span> <span class="o">=</span> <span class="n">Ib</span><span class="o">*</span><span class="n">Rb</span>
        <span class="n">Idt</span> <span class="o">=</span> <span class="n">Id</span><span class="o">*</span><span class="p">((</span><span class="mi">1</span><span class="o">-</span><span class="n">F1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">cosd</span><span class="p">(</span><span class="n">beta</span><span class="p">))</span><span class="o">/</span><span class="mi">2</span><span class="o">+</span><span class="n">F1</span><span class="o">*</span><span class="n">a</span><span class="o">/</span><span class="n">b</span><span class="p">)</span><span class="o">+</span> \
        <span class="n">Id</span><span class="o">*</span><span class="n">F2</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">beta</span><span class="p">)</span>
        <span class="n">Idt</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">Idt</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">Irt</span> <span class="o">=</span> <span class="n">I</span><span class="o">*</span><span class="n">rhog</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">cosd</span><span class="p">(</span><span class="n">beta</span><span class="p">))</span><span class="o">/</span><span class="mf">2.0</span>
        <span class="n">It</span> <span class="o">=</span> <span class="n">Ibt</span> <span class="o">+</span> <span class="n">Idt</span> <span class="o">+</span> <span class="n">Irt</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">Ibt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">Idt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">Irt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">It</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="n">It</span><span class="p">,</span><span class="n">Ibt</span><span class="p">,</span><span class="n">Idt</span><span class="p">,</span><span class="n">Irt</span>

</div>
<div class="viewcode-block" id="snell"><a class="viewcode-back" href="../python.html#solar_mod.snell">[docs]</a><span class="k">def</span>  <span class="nf">snell</span><span class="p">(</span><span class="n">th1</span><span class="p">,</span><span class="n">nv</span><span class="p">,</span><span class="n">na</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># calcul de l&#39;angle de réflexion donnée par la loi de snell</span>
    <span class="c"># Si on ne donne que 2  arguments, on suppose que  la radiaton incidente est</span>
    <span class="c"># dans l&#39;air ou le vie n = 1</span>
    <span class="n">sth2</span> <span class="o">=</span> <span class="n">na</span><span class="o">*</span><span class="n">sind</span><span class="p">(</span><span class="n">th1</span><span class="p">)</span><span class="o">/</span><span class="n">nv</span>
    <span class="n">th2</span> <span class="o">=</span> <span class="n">arcsind</span><span class="p">(</span><span class="n">sth2</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">th2</span>
</div>
<div class="viewcode-block" id="r_coef"><a class="viewcode-back" href="../python.html#solar_mod.r_coef">[docs]</a><span class="k">def</span> <span class="nf">r_coef</span><span class="p">(</span><span class="n">th1</span><span class="p">,</span><span class="n">th2</span><span class="p">,</span><span class="n">n2</span><span class="o">=</span><span class="mf">1.526</span><span class="p">,</span><span class="n">n1</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c">#</span>
    <span class="c"># fnction calcule dles coefficients de Fresnel</span>
    <span class="c"># ecrit par Louis Lamarche 11-3-10</span>
    <span class="k">if</span> <span class="n">th1</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">r</span> <span class="o">=</span> <span class="p">((</span><span class="n">n1</span><span class="o">-</span><span class="n">n2</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">n1</span><span class="o">+</span><span class="n">n2</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span>
        <span class="n">rpe</span> <span class="o">=</span> <span class="n">r</span>
        <span class="n">rpa</span> <span class="o">=</span> <span class="n">r</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">th12</span> <span class="o">=</span> <span class="n">th1</span><span class="o">+</span><span class="n">th2</span>
        <span class="n">th2m1</span> <span class="o">=</span> <span class="n">th2</span><span class="o">-</span><span class="n">th1</span>
        <span class="n">rpe</span> <span class="o">=</span> <span class="n">sind</span><span class="p">(</span><span class="n">th2m1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="n">sind</span><span class="p">(</span><span class="n">th12</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
        <span class="n">rpa</span> <span class="o">=</span> <span class="n">tand</span><span class="p">(</span><span class="n">th2m1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="n">tand</span><span class="p">(</span><span class="n">th12</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
        <span class="n">r</span> <span class="o">=</span> <span class="p">(</span><span class="n">rpe</span><span class="o">+</span><span class="n">rpa</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
    <span class="k">return</span> <span class="n">rpe</span><span class="p">,</span><span class="n">rpa</span><span class="p">,</span><span class="n">r</span>
</div>
<div class="viewcode-block" id="Calcul_coef_vitre"><a class="viewcode-back" href="../python.html#solar_mod.Calcul_coef_vitre">[docs]</a><span class="k">def</span> <span class="nf">Calcul_coef_vitre</span><span class="p">(</span><span class="n">rpe</span><span class="p">,</span><span class="n">rpa</span><span class="p">,</span><span class="n">tau_al</span><span class="p">,</span><span class="n">N</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c">#</span>
    <span class="c"># fonction calcule les coefficients de absrortion pour N plaques identiques</span>
    <span class="c"># ecrit par Louis Lamarche 11-3-10</span>
    <span class="c"># voir DB 5.3.1 SH 18.7</span>
    <span class="n">tau_pe1</span> <span class="o">=</span> <span class="n">tau_al</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">rpe</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">rpe</span><span class="p">)</span><span class="o">*</span><span class="p">((</span><span class="mi">1</span><span class="o">-</span><span class="n">rpe</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="p">(</span><span class="n">rpe</span><span class="o">*</span><span class="n">tau_al</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
    <span class="n">tau_pa1</span> <span class="o">=</span> <span class="n">tau_al</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">rpa</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">rpa</span><span class="p">)</span><span class="o">*</span><span class="p">((</span><span class="mi">1</span><span class="o">-</span><span class="n">rpa</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="p">(</span><span class="n">rpa</span><span class="o">*</span><span class="n">tau_al</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
    <span class="n">rho_pe1</span> <span class="o">=</span> <span class="n">rpe</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">tau_al</span><span class="o">*</span><span class="n">tau_pe1</span><span class="p">)</span>
    <span class="n">rho_pa1</span> <span class="o">=</span> <span class="n">rpa</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">tau_al</span><span class="o">*</span><span class="n">tau_pa1</span><span class="p">)</span>
    <span class="n">al_pe1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">tau_al</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">rpe</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">rpe</span><span class="o">*</span><span class="n">tau_al</span><span class="p">)</span>
    <span class="n">al_pa1</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">tau_al</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">rpa</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">rpa</span><span class="o">*</span><span class="n">tau_al</span><span class="p">)</span>
    <span class="n">al_pa</span> <span class="o">=</span> <span class="n">al_pa1</span>
    <span class="n">al_pe</span> <span class="o">=</span> <span class="n">al_pe1</span>
    <span class="n">tau_pa</span> <span class="o">=</span> <span class="n">tau_pa1</span>
    <span class="n">tau_pe</span> <span class="o">=</span> <span class="n">tau_pe1</span>
    <span class="n">rho_pa</span> <span class="o">=</span> <span class="n">rho_pa1</span>
    <span class="n">rho_pe</span> <span class="o">=</span> <span class="n">rho_pe1</span>
    <span class="k">if</span> <span class="n">N</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">N</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">tau_pe</span> <span class="o">=</span> <span class="n">tau_pe1</span><span class="o">*</span><span class="n">tau_pe</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">rho_pe1</span><span class="o">*</span><span class="n">rho_pe</span><span class="p">)</span>
            <span class="n">tau_pa</span> <span class="o">=</span> <span class="n">tau_pa1</span><span class="o">*</span><span class="n">tau_pa</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">rho_pa1</span><span class="o">*</span><span class="n">rho_pa</span><span class="p">)</span>
            <span class="n">rho_pe</span> <span class="o">=</span> <span class="n">rho_pe1</span> <span class="o">+</span> <span class="n">rho_pe</span><span class="o">*</span><span class="n">tau_pe1</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">rho_pe1</span><span class="o">*</span><span class="n">rho_pe</span><span class="p">)</span>
            <span class="n">rho_pa</span> <span class="o">=</span> <span class="n">rho_pa1</span> <span class="o">+</span> <span class="n">rho_pa</span><span class="o">*</span><span class="n">tau_pa1</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">rho_pa1</span><span class="o">*</span><span class="n">rho_pa</span><span class="p">)</span>
            <span class="n">al_pe</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">rho_pe</span><span class="o">+</span><span class="n">tau_pe</span><span class="p">)</span>
            <span class="n">al_pa</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">rho_pa</span><span class="o">+</span><span class="n">tau_pa</span><span class="p">)</span>
    <span class="n">alp</span> <span class="o">=</span> <span class="mf">0.5</span><span class="o">*</span><span class="p">(</span><span class="n">al_pa</span><span class="o">+</span><span class="n">al_pe</span><span class="p">)</span>
    <span class="n">tau</span> <span class="o">=</span> <span class="mf">0.5</span><span class="o">*</span><span class="p">(</span><span class="n">tau_pa</span><span class="o">+</span><span class="n">tau_pe</span><span class="p">)</span>
    <span class="n">rho</span> <span class="o">=</span> <span class="mf">0.5</span><span class="o">*</span><span class="p">(</span><span class="n">rho_pa</span><span class="o">+</span><span class="n">rho_pe</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">tau</span><span class="p">,</span><span class="n">rho</span><span class="p">,</span><span class="n">alp</span>

</div>
<div class="viewcode-block" id="Calcul_tau_al"><a class="viewcode-back" href="../python.html#solar_mod.Calcul_tau_al">[docs]</a><span class="k">def</span>  <span class="nf">Calcul_tau_al</span><span class="p">(</span><span class="n">the1</span><span class="p">,</span><span class="n">alpn</span><span class="p">,</span><span class="n">KL</span><span class="p">,</span><span class="n">n2</span><span class="o">=</span><span class="mf">1.526</span><span class="p">,</span><span class="n">n1</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">N</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># calcul de (tau_alpha)</span>
    <span class="c"># the1 angle incidente</span>
    <span class="c"># alpn, coeficient d,absorbeur faible longueur d&#39;onde</span>
    <span class="c"># n2 : indice de réfraction de la vitre ( défaut 1.53)</span>
    <span class="c"># n1 : indice de réfraction de l&#39;air ( défaut 1)</span>
    <span class="n">the2</span> <span class="o">=</span> <span class="n">snell</span><span class="p">(</span><span class="n">the1</span><span class="p">,</span><span class="n">n2</span><span class="p">,</span><span class="n">n1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">the1</span> <span class="o">==</span><span class="mi">0</span><span class="p">:</span>
        <span class="n">rpe</span><span class="p">,</span><span class="n">rpa</span><span class="p">,</span><span class="n">r</span> <span class="o">=</span> <span class="n">r_coef</span><span class="p">(</span><span class="n">the1</span><span class="p">,</span><span class="n">the2</span><span class="p">,</span><span class="n">n2</span><span class="p">,</span><span class="n">n1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">rpe</span><span class="p">,</span><span class="n">rpa</span><span class="p">,</span><span class="n">r</span> <span class="o">=</span> <span class="n">r_coef</span><span class="p">(</span><span class="n">the1</span><span class="p">,</span><span class="n">the2</span><span class="p">)</span>
    <span class="n">tau_pe</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">rpe</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">rpe</span><span class="p">)</span>
    <span class="n">tau_pa</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">rpa</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">rpa</span><span class="p">)</span>
    <span class="n">tau_r</span> <span class="o">=</span> <span class="mf">0.5</span><span class="o">*</span><span class="p">(</span><span class="n">tau_pa</span><span class="o">+</span><span class="n">tau_pe</span><span class="p">)</span>
    <span class="n">tau_a</span> <span class="o">=</span> <span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">KL</span><span class="o">/</span><span class="n">cosd</span><span class="p">(</span><span class="n">the2</span><span class="p">))</span>
    <span class="n">tau</span><span class="p">,</span><span class="n">rho</span><span class="p">,</span><span class="n">alpv</span> <span class="o">=</span> <span class="n">Calcul_coef_vitre</span><span class="p">(</span><span class="n">rpe</span><span class="p">,</span><span class="n">rpa</span><span class="p">,</span><span class="n">tau_a</span><span class="p">,</span><span class="n">N</span><span class="p">)</span>
    <span class="n">alpc</span> <span class="o">=</span> <span class="n">alpn</span><span class="o">*</span><span class="n">alp_alpn</span><span class="p">(</span><span class="n">the1</span><span class="p">);</span>
    <span class="n">tau_al</span> <span class="o">=</span> <span class="n">tau</span><span class="o">*</span><span class="n">alpc</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">alpc</span><span class="p">)</span><span class="o">*</span><span class="n">rho</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">tau_al</span>
</div>
<div class="viewcode-block" id="angle_diffus"><a class="viewcode-back" href="../python.html#solar_mod.angle_diffus">[docs]</a><span class="k">def</span>  <span class="nf">angle_diffus</span><span class="p">(</span><span class="n">beta</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># relation  5.4.2 DB 3RD edition</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mf">59.7</span> <span class="o">-</span> <span class="mf">0.1388</span><span class="o">*</span><span class="n">beta</span><span class="o">+</span><span class="mf">0.001497</span><span class="o">*</span><span class="n">beta</span><span class="o">**</span><span class="mi">2</span>
    <span class="k">return</span> <span class="n">y</span>


</div>
<div class="viewcode-block" id="pv_fct"><a class="viewcode-back" href="../python.html#solar_mod.pv_fct">[docs]</a><span class="k">def</span> <span class="nf">pv_fct</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">param</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">k</span> <span class="o">=</span> <span class="mf">1.381e-23</span>
    <span class="n">Tref</span> <span class="o">=</span> <span class="mf">25.0</span> <span class="o">+</span> <span class="mf">273.15</span>
    <span class="n">Isc</span> <span class="o">=</span> <span class="n">param</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">Voc</span> <span class="o">=</span> <span class="n">param</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">Im</span> <span class="o">=</span> <span class="n">param</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">Vm</span> <span class="o">=</span> <span class="n">param</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">muV</span> <span class="o">=</span> <span class="n">param</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
    <span class="n">muI</span> <span class="o">=</span> <span class="n">param</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">IL</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">Io</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">Rsh</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">Rs</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
    <span class="n">Idsc</span> <span class="o">=</span> <span class="n">Io</span><span class="o">*</span><span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="n">Isc</span><span class="o">*</span><span class="n">Rs</span><span class="o">/</span><span class="n">a</span><span class="p">)</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="n">Idoc</span> <span class="o">=</span><span class="n">Io</span><span class="o">*</span><span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="n">Voc</span><span class="o">/</span><span class="n">a</span><span class="p">)</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="n">exm</span> <span class="o">=</span> <span class="n">exp</span><span class="p">((</span><span class="n">Vm</span><span class="o">+</span><span class="n">Im</span><span class="o">*</span><span class="n">Rs</span><span class="p">)</span><span class="o">/</span><span class="n">a</span><span class="p">)</span>
    <span class="n">Idm</span> <span class="o">=</span><span class="n">Io</span><span class="o">*</span><span class="p">(</span><span class="n">exm</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="c"># short-circuit</span>
    <span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">Isc</span> <span class="o">-</span> <span class="n">IL</span> <span class="o">+</span> <span class="n">Idsc</span> <span class="o">+</span> <span class="n">Isc</span><span class="o">*</span><span class="n">Rs</span><span class="o">/</span><span class="n">Rsh</span>
    <span class="c"># open-circuit ref</span>
    <span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span>  <span class="o">-</span><span class="n">IL</span> <span class="o">+</span> <span class="n">Idoc</span> <span class="o">+</span> <span class="n">Voc</span><span class="o">/</span><span class="n">Rsh</span>
    <span class="c"># max Im</span>
    <span class="n">y</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">Im</span> <span class="o">-</span> <span class="n">IL</span> <span class="o">+</span> <span class="n">Idm</span> <span class="o">+</span> <span class="p">(</span><span class="n">Vm</span><span class="o">+</span><span class="n">Im</span><span class="o">*</span><span class="n">Rs</span><span class="p">)</span><span class="o">/</span><span class="n">Rsh</span>
    <span class="c"># max Im der</span>
<span class="c">#    y[3] = Im*(1.0+Io*exm*Rs/a+Rs/Rsh) - Vm*(Io*exm/a + 1.0/Rsh)</span>
    <span class="n">y</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">Im</span> <span class="o">-</span> <span class="n">Vm</span><span class="o">*</span><span class="p">(</span><span class="n">Io</span><span class="o">*</span><span class="n">exm</span><span class="o">/</span><span class="n">a</span> <span class="o">+</span> <span class="mf">1.0</span><span class="o">/</span><span class="n">Rsh</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mf">1.0</span><span class="o">+</span><span class="n">Io</span><span class="o">*</span><span class="n">exm</span><span class="o">*</span><span class="n">Rs</span><span class="o">/</span><span class="n">a</span><span class="o">+</span><span class="n">Rs</span><span class="o">/</span><span class="n">Rsh</span><span class="p">)</span>
    <span class="n">T2</span> <span class="o">=</span> <span class="n">Tref</span> <span class="o">+</span> <span class="mi">2</span>
    <span class="n">Voc2</span> <span class="o">=</span> <span class="p">(</span><span class="n">T2</span><span class="o">-</span><span class="n">Tref</span><span class="p">)</span><span class="o">*</span><span class="n">muV</span> <span class="o">+</span> <span class="n">Voc</span>
    <span class="n">a2</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="n">T2</span><span class="o">/</span><span class="n">Tref</span>
    <span class="n">IL2</span> <span class="o">=</span> <span class="n">IL</span> <span class="o">+</span> <span class="n">muI</span><span class="o">*</span><span class="p">(</span><span class="n">T2</span><span class="o">-</span><span class="n">Tref</span><span class="p">)</span>
    <span class="n">C</span> <span class="o">=</span> <span class="mf">0.0002677</span>
    <span class="n">Eg</span> <span class="o">=</span>  <span class="mf">1.796e-19</span>
    <span class="n">Eg2</span> <span class="o">=</span> <span class="n">Eg</span><span class="o">*</span><span class="p">(</span><span class="mf">1.0</span><span class="o">-</span><span class="n">C</span><span class="o">*</span><span class="p">(</span><span class="n">T2</span><span class="o">-</span><span class="n">Tref</span><span class="p">))</span>
    <span class="n">Io2</span> <span class="o">=</span> <span class="n">Io</span><span class="o">*</span><span class="p">(</span><span class="n">T2</span><span class="o">/</span><span class="n">Tref</span><span class="p">)</span><span class="o">**</span><span class="mi">3</span><span class="o">*</span><span class="n">exp</span><span class="p">(</span><span class="n">Eg</span><span class="o">/</span><span class="p">(</span><span class="n">k</span><span class="o">*</span><span class="n">Tref</span><span class="p">)</span> <span class="o">-</span> <span class="n">Eg</span><span class="o">/</span><span class="p">(</span><span class="n">k</span><span class="o">*</span><span class="n">T2</span><span class="p">))</span>
    <span class="c"># open-circuit T2</span>
    <span class="n">Idoc2</span> <span class="o">=</span><span class="n">Io2</span><span class="o">*</span><span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="n">Voc2</span><span class="o">/</span><span class="n">a2</span><span class="p">)</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="n">y</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span>  <span class="o">-</span><span class="n">IL2</span> <span class="o">+</span> <span class="n">Idoc2</span> <span class="o">+</span> <span class="n">Voc2</span><span class="o">/</span><span class="n">Rsh</span>
    <span class="k">return</span> <span class="n">y</span>
</div>
<div class="viewcode-block" id="pv_fct_194"><a class="viewcode-back" href="../python.html#solar_mod.pv_fct_194">[docs]</a><span class="k">def</span> <span class="nf">pv_fct_194</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">param</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">k</span> <span class="o">=</span> <span class="mf">1.381e-23</span>
    <span class="n">Tref</span> <span class="o">=</span> <span class="mf">25.0</span> <span class="o">+</span> <span class="mf">273.15</span>
    <span class="n">Isc</span> <span class="o">=</span> <span class="n">param</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">Voc</span> <span class="o">=</span> <span class="n">param</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">Im</span> <span class="o">=</span> <span class="n">param</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">Vm</span> <span class="o">=</span> <span class="n">param</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">muV</span> <span class="o">=</span> <span class="n">param</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
    <span class="n">muI</span> <span class="o">=</span> <span class="n">param</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">IL</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">Io</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">Rsh</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">Rs</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
    <span class="n">Idsc</span> <span class="o">=</span> <span class="n">Io</span><span class="o">*</span><span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="n">Isc</span><span class="o">*</span><span class="n">Rs</span><span class="o">/</span><span class="n">a</span><span class="p">)</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="n">Idoc</span> <span class="o">=</span><span class="n">Io</span><span class="o">*</span><span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="n">Voc</span><span class="o">/</span><span class="n">a</span><span class="p">)</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="n">exm</span> <span class="o">=</span> <span class="n">exp</span><span class="p">((</span><span class="n">Vm</span><span class="o">+</span><span class="n">Im</span><span class="o">*</span><span class="n">Rs</span><span class="p">)</span><span class="o">/</span><span class="n">a</span><span class="p">)</span>
    <span class="n">Idm</span> <span class="o">=</span><span class="n">Io</span><span class="o">*</span><span class="p">(</span><span class="n">exm</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="c"># short-circuit</span>
    <span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">Isc</span> <span class="o">-</span> <span class="n">IL</span> <span class="o">+</span> <span class="n">Idsc</span> <span class="o">+</span> <span class="n">Isc</span><span class="o">*</span><span class="n">Rs</span><span class="o">/</span><span class="n">Rsh</span>
    <span class="c"># open-circuit ref</span>
    <span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span>  <span class="o">-</span><span class="n">IL</span> <span class="o">+</span> <span class="n">Idoc</span> <span class="o">+</span> <span class="n">Voc</span><span class="o">/</span><span class="n">Rsh</span>
    <span class="c"># max Im</span>
    <span class="n">y</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">Im</span> <span class="o">-</span> <span class="n">IL</span> <span class="o">+</span> <span class="n">Idm</span> <span class="o">+</span> <span class="p">(</span><span class="n">Vm</span><span class="o">+</span><span class="n">Im</span><span class="o">*</span><span class="n">Rs</span><span class="p">)</span><span class="o">/</span><span class="n">Rsh</span>
    <span class="c"># max Im der</span>
    <span class="n">y</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">Im</span> <span class="o">-</span> <span class="n">Vm</span><span class="o">*</span><span class="p">(</span><span class="n">Io</span><span class="o">*</span><span class="n">exm</span><span class="o">/</span><span class="n">a</span> <span class="o">+</span> <span class="mf">1.0</span><span class="o">/</span><span class="n">Rsh</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mf">1.0</span><span class="o">+</span><span class="n">Io</span><span class="o">*</span><span class="n">exm</span><span class="o">*</span><span class="n">Rs</span><span class="o">/</span><span class="n">a</span><span class="o">+</span><span class="n">Rs</span><span class="o">/</span><span class="n">Rsh</span><span class="p">)</span>
    <span class="n">T2</span> <span class="o">=</span> <span class="n">Tref</span> <span class="o">+</span> <span class="mi">2</span>
    <span class="n">Voc2</span> <span class="o">=</span> <span class="p">(</span><span class="n">T2</span><span class="o">-</span><span class="n">Tref</span><span class="p">)</span><span class="o">*</span><span class="n">muV</span> <span class="o">+</span> <span class="n">Voc</span>
    <span class="n">a2</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="n">T2</span><span class="o">/</span><span class="n">Tref</span>
    <span class="n">IL2</span> <span class="o">=</span> <span class="n">IL</span> <span class="o">+</span> <span class="n">muI</span><span class="o">*</span><span class="p">(</span><span class="n">T2</span><span class="o">-</span><span class="n">Tref</span><span class="p">)</span>
    <span class="n">C</span> <span class="o">=</span> <span class="mf">0.0002677</span>
    <span class="n">Eg</span> <span class="o">=</span>  <span class="mf">1.796e-19</span>
    <span class="n">Io2</span> <span class="o">=</span> <span class="n">Io</span><span class="o">*</span><span class="p">(</span><span class="n">T2</span><span class="o">/</span><span class="n">Tref</span><span class="p">)</span><span class="o">**</span><span class="mi">3</span><span class="o">*</span><span class="n">exp</span><span class="p">(</span><span class="n">Eg</span><span class="o">/</span><span class="p">(</span><span class="n">k</span><span class="o">*</span><span class="n">Tref</span><span class="p">)</span> <span class="o">-</span> <span class="n">Eg</span><span class="o">/</span><span class="p">(</span><span class="n">k</span><span class="o">*</span><span class="n">T2</span><span class="p">))</span>
    <span class="c"># open-circuit T2</span>
    <span class="n">Idoc2</span> <span class="o">=</span><span class="n">Io2</span><span class="o">*</span><span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="n">Voc2</span><span class="o">/</span><span class="n">a2</span><span class="p">)</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="n">y</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span>  <span class="o">-</span><span class="n">IL2</span> <span class="o">+</span> <span class="n">Idoc2</span> <span class="o">+</span> <span class="n">Voc2</span><span class="o">/</span><span class="n">Rsh</span>
    <span class="k">return</span> <span class="n">y</span>

</div>
<div class="viewcode-block" id="pv_module"><a class="viewcode-back" href="../python.html#solar_mod.pv_module">[docs]</a><span class="k">def</span> <span class="nf">pv_module</span><span class="p">(</span><span class="n">xi</span><span class="p">,</span><span class="o">*</span><span class="n">param</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sol</span> <span class="o">=</span> <span class="n">root</span><span class="p">(</span><span class="n">pv_fct</span><span class="p">,</span><span class="n">xi</span><span class="p">,</span><span class="n">args</span> <span class="o">=</span> <span class="n">param</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s">&#39;lm&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">sol</span><span class="o">.</span><span class="n">x</span>
</div>
<div class="viewcode-block" id="pv_module_194"><a class="viewcode-back" href="../python.html#solar_mod.pv_module_194">[docs]</a><span class="k">def</span> <span class="nf">pv_module_194</span><span class="p">(</span><span class="n">xi</span><span class="p">,</span><span class="o">*</span><span class="n">param</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sol</span> <span class="o">=</span> <span class="n">root</span><span class="p">(</span><span class="n">pv_fct_194</span><span class="p">,</span><span class="n">xi</span><span class="p">,</span><span class="n">args</span> <span class="o">=</span> <span class="n">param</span><span class="p">,</span><span class="n">method</span><span class="o">=</span><span class="s">&#39;lm&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">sol</span><span class="o">.</span><span class="n">x</span>

</div>
<div class="viewcode-block" id="I_pvV"><a class="viewcode-back" href="../python.html#solar_mod.I_pvV">[docs]</a><span class="k">def</span> <span class="nf">I_pvV</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">V</span><span class="p">,</span><span class="n">S</span> <span class="o">=</span> <span class="mf">1000.0</span><span class="p">,</span><span class="n">T</span> <span class="o">=</span> <span class="mf">25.0</span> <span class="o">+</span> <span class="mf">273.15</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">IL</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">Io</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">Rsh</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">Rs</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
    <span class="n">muI</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">k</span> <span class="o">=</span> <span class="mf">1.381e-23</span>
    <span class="n">Tref</span> <span class="o">=</span> <span class="mf">25.0</span> <span class="o">+</span> <span class="mf">273.15</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="n">T</span><span class="o">/</span><span class="n">Tref</span>
    <span class="n">C</span> <span class="o">=</span> <span class="mf">0.0002677</span>
    <span class="n">Eg</span> <span class="o">=</span>  <span class="mf">1.794e-19</span>
    <span class="n">Eg2</span> <span class="o">=</span> <span class="n">Eg</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">C</span><span class="o">*</span><span class="p">(</span><span class="n">T</span><span class="o">-</span><span class="n">Tref</span><span class="p">))</span>
    <span class="n">Rsh</span> <span class="o">=</span> <span class="n">Rsh</span><span class="o">*</span><span class="mi">1000</span><span class="o">/</span><span class="n">S</span>
    <span class="n">Io</span> <span class="o">=</span> <span class="n">Io</span><span class="o">*</span><span class="p">(</span><span class="n">T</span><span class="o">/</span><span class="n">Tref</span><span class="p">)</span><span class="o">**</span><span class="mi">3</span><span class="o">*</span><span class="n">exp</span><span class="p">(</span><span class="n">Eg</span><span class="o">/</span><span class="p">(</span><span class="n">k</span><span class="o">*</span><span class="n">Tref</span><span class="p">)</span> <span class="o">-</span> <span class="n">Eg2</span><span class="o">/</span><span class="p">(</span><span class="n">k</span><span class="o">*</span><span class="n">T</span><span class="p">))</span>
    <span class="n">IL</span> <span class="o">=</span> <span class="n">S</span><span class="o">/</span><span class="mf">1000.0</span><span class="o">*</span><span class="p">(</span><span class="n">IL</span> <span class="o">+</span> <span class="n">muI</span><span class="o">*</span><span class="p">(</span><span class="n">T</span><span class="o">-</span><span class="n">Tref</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">I_pv_fct</span><span class="p">(</span><span class="n">I</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        param : float</span>
<span class="sd">            Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        param : float</span>
<span class="sd">            Ce paramètre est...</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Notes s&#39;il en as.</span>

<span class="sd">        References</span>
<span class="sd">        ----------</span>
<span class="sd">        La référence.</span>
<span class="sd">    </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Id</span> <span class="o">=</span> <span class="n">Io</span><span class="o">*</span><span class="p">(</span><span class="n">exp</span><span class="p">((</span><span class="n">V</span><span class="o">+</span><span class="n">I</span><span class="o">*</span><span class="n">Rs</span><span class="p">)</span><span class="o">/</span><span class="n">a</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">In</span> <span class="o">=</span> <span class="n">IL</span> <span class="o">-</span> <span class="n">Id</span> <span class="o">-</span> <span class="p">(</span><span class="n">V</span><span class="o">+</span><span class="n">I</span><span class="o">*</span><span class="n">Rs</span><span class="p">)</span><span class="o">/</span><span class="n">Rsh</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">In</span> <span class="o">-</span> <span class="n">I</span>
        <span class="k">return</span> <span class="n">y</span>

    <span class="n">Im</span> <span class="o">=</span> <span class="n">newton</span><span class="p">(</span><span class="n">I_pv_fct</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">Im</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">Im</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Im</span>

</div>
<div class="viewcode-block" id="I_pvR"><a class="viewcode-back" href="../python.html#solar_mod.I_pvR">[docs]</a><span class="k">def</span> <span class="nf">I_pvR</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">R</span><span class="p">,</span><span class="n">S</span> <span class="o">=</span> <span class="mf">1000.0</span><span class="p">,</span><span class="n">T</span> <span class="o">=</span> <span class="mf">25.0</span> <span class="o">+</span> <span class="mf">273.15</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    S : float</span>
<span class="sd">            (Default value = 1000.0)</span>
<span class="sd">    </span>
<span class="sd">    T : float</span>
<span class="sd">                (Default value = 25.0 + 273.15)</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>



    <span class="n">IL</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">Io</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">Rsh</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">Rs</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
    <span class="n">muI</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">k</span> <span class="o">=</span> <span class="mf">1.381e-23</span>
    <span class="n">Tref</span> <span class="o">=</span> <span class="mf">25.0</span> <span class="o">+</span> <span class="mf">273.15</span>
    <span class="n">Rsh</span> <span class="o">=</span> <span class="n">Rsh</span><span class="o">*</span><span class="mi">1000</span><span class="o">/</span><span class="n">S</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="n">T</span><span class="o">/</span><span class="n">Tref</span>
    <span class="n">C</span> <span class="o">=</span> <span class="mf">0.0002677</span>
    <span class="n">Eg</span> <span class="o">=</span>  <span class="mf">1.794e-19</span>
    <span class="n">Eg2</span> <span class="o">=</span> <span class="n">Eg</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">C</span><span class="o">*</span><span class="p">(</span><span class="n">T</span><span class="o">-</span><span class="n">Tref</span><span class="p">))</span>
    <span class="n">Io</span> <span class="o">=</span> <span class="n">Io</span><span class="o">*</span><span class="p">(</span><span class="n">T</span><span class="o">/</span><span class="n">Tref</span><span class="p">)</span><span class="o">**</span><span class="mi">3</span><span class="o">*</span><span class="n">exp</span><span class="p">(</span><span class="n">Eg</span><span class="o">/</span><span class="p">(</span><span class="n">k</span><span class="o">*</span><span class="n">Tref</span><span class="p">)</span> <span class="o">-</span> <span class="n">Eg2</span><span class="o">/</span><span class="p">(</span><span class="n">k</span><span class="o">*</span><span class="n">T</span><span class="p">))</span>
    <span class="n">IL</span> <span class="o">=</span> <span class="n">S</span><span class="o">/</span><span class="mf">1000.0</span><span class="o">*</span><span class="p">(</span><span class="n">IL</span> <span class="o">+</span> <span class="n">muI</span><span class="o">*</span><span class="p">(</span><span class="n">T</span><span class="o">-</span><span class="n">Tref</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">I_pv_fct</span><span class="p">(</span><span class="n">I</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        param : float</span>
<span class="sd">            Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        param : float</span>
<span class="sd">            Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Notes s&#39;il en as.</span>

<span class="sd">        References</span>
<span class="sd">        ----------</span>
<span class="sd">        La référence.</span>
<span class="sd">    </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">V</span> <span class="o">=</span> <span class="n">R</span><span class="o">*</span><span class="n">I</span>
        <span class="n">Id</span> <span class="o">=</span> <span class="n">Io</span><span class="o">*</span><span class="p">(</span><span class="n">exp</span><span class="p">((</span><span class="n">V</span><span class="o">+</span><span class="n">I</span><span class="o">*</span><span class="n">Rs</span><span class="p">)</span><span class="o">/</span><span class="n">a</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">In</span> <span class="o">=</span> <span class="n">IL</span> <span class="o">-</span> <span class="n">Id</span> <span class="o">-</span> <span class="p">(</span><span class="n">V</span><span class="o">+</span><span class="n">I</span><span class="o">*</span><span class="n">Rs</span><span class="p">)</span><span class="o">/</span><span class="n">Rsh</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">In</span> <span class="o">-</span> <span class="n">I</span>
        <span class="k">return</span> <span class="n">y</span>

    <span class="n">Im</span> <span class="o">=</span> <span class="n">newton</span><span class="p">(</span><span class="n">I_pv_fct</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
    <span class="n">Im</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">Im</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Im</span>

</div>
<div class="viewcode-block" id="IV_pv_peak"><a class="viewcode-back" href="../python.html#solar_mod.IV_pv_peak">[docs]</a><span class="k">def</span> <span class="nf">IV_pv_peak</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">S</span> <span class="o">=</span> <span class="mf">1000.0</span><span class="p">,</span><span class="n">T</span> <span class="o">=</span> <span class="mf">25.0</span> <span class="o">+</span> <span class="mf">273.15</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>



    <span class="n">IL</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">Io</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">Rsh</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
    <span class="n">Rs</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
    <span class="n">muI</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">k</span> <span class="o">=</span> <span class="mf">1.381e-23</span>
    <span class="n">Tref</span> <span class="o">=</span> <span class="mf">25.0</span> <span class="o">+</span> <span class="mf">273.15</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="n">T</span><span class="o">/</span><span class="n">Tref</span>
    <span class="n">C</span> <span class="o">=</span> <span class="mf">0.0002677</span>
    <span class="n">Eg</span> <span class="o">=</span>  <span class="mf">1.794e-19</span>
    <span class="n">Eg2</span> <span class="o">=</span> <span class="n">Eg</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">C</span><span class="o">*</span><span class="p">(</span><span class="n">T</span><span class="o">-</span><span class="n">Tref</span><span class="p">))</span>
    <span class="n">Rsh</span> <span class="o">=</span> <span class="n">Rsh</span><span class="o">*</span><span class="mi">1000</span><span class="o">/</span><span class="n">S</span>
    <span class="n">Io</span> <span class="o">=</span> <span class="n">Io</span><span class="o">*</span><span class="p">(</span><span class="n">T</span><span class="o">/</span><span class="n">Tref</span><span class="p">)</span><span class="o">**</span><span class="mi">3</span><span class="o">*</span><span class="n">exp</span><span class="p">(</span><span class="n">Eg</span><span class="o">/</span><span class="p">(</span><span class="n">k</span><span class="o">*</span><span class="n">Tref</span><span class="p">)</span> <span class="o">-</span> <span class="n">Eg2</span><span class="o">/</span><span class="p">(</span><span class="n">k</span><span class="o">*</span><span class="n">T</span><span class="p">))</span>
    <span class="n">IL</span> <span class="o">=</span> <span class="n">S</span><span class="o">/</span><span class="mf">1000.0</span><span class="o">*</span><span class="p">(</span><span class="n">IL</span> <span class="o">+</span> <span class="n">muI</span><span class="o">*</span><span class="p">(</span><span class="n">T</span><span class="o">-</span><span class="n">Tref</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">Peak_pv_fct</span><span class="p">(</span><span class="n">xin</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        param : float</span>
<span class="sd">            Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        param : float</span>
<span class="sd">            Ce paramètre est...</span>

<span class="sd">        Notes</span>
<span class="sd">        -----</span>
<span class="sd">        Notes s&#39;il en as.</span>

<span class="sd">        References</span>
<span class="sd">        ----------</span>
<span class="sd">        La référence.</span>
<span class="sd">    </span>
<span class="sd">        &quot;&quot;&quot;</span>


        <span class="n">y</span> <span class="o">=</span> <span class="n">zeros</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">I</span> <span class="o">=</span> <span class="n">xin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">V</span> <span class="o">=</span> <span class="n">xin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">Id</span> <span class="o">=</span> <span class="n">Io</span><span class="o">*</span><span class="p">(</span><span class="n">exp</span><span class="p">((</span><span class="n">V</span><span class="o">+</span><span class="n">I</span><span class="o">*</span><span class="n">Rs</span><span class="p">)</span><span class="o">/</span><span class="n">a</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">In</span> <span class="o">=</span> <span class="n">IL</span> <span class="o">-</span> <span class="n">Id</span> <span class="o">-</span> <span class="p">(</span><span class="n">V</span><span class="o">+</span><span class="n">I</span><span class="o">*</span><span class="n">Rs</span><span class="p">)</span><span class="o">/</span><span class="n">Rsh</span>
        <span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">In</span> <span class="o">-</span> <span class="n">I</span>
        <span class="n">exm</span> <span class="o">=</span> <span class="n">exp</span><span class="p">((</span><span class="n">V</span><span class="o">+</span><span class="n">I</span><span class="o">*</span><span class="n">Rs</span><span class="p">)</span><span class="o">/</span><span class="n">a</span><span class="p">)</span>
        <span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">I</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">Io</span><span class="o">*</span><span class="n">exm</span><span class="o">*</span><span class="n">Rs</span><span class="o">/</span><span class="n">a</span><span class="o">+</span><span class="n">Rs</span><span class="o">/</span><span class="n">Rsh</span><span class="p">)</span> <span class="o">-</span> <span class="n">V</span><span class="o">*</span><span class="p">(</span><span class="n">Io</span><span class="o">*</span><span class="n">exm</span><span class="o">/</span><span class="n">a</span> <span class="o">+</span> <span class="mi">1</span><span class="o">/</span><span class="n">Rsh</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">y</span>

    <span class="n">y</span> <span class="o">=</span> <span class="n">fsolve</span><span class="p">(</span><span class="n">Peak_pv_fct</span><span class="p">,[</span><span class="n">IL</span><span class="p">,</span><span class="mf">20.0</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">y</span>
</div>
<div class="viewcode-block" id="cherche_index"><a class="viewcode-back" href="../python.html#solar_mod.cherche_index">[docs]</a><span class="k">def</span>  <span class="nf">cherche_index</span><span class="p">(</span><span class="n">xi</span><span class="p">,</span><span class="n">x</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    r&#39;&#39;&#39; Petite descrition de la fonction icluant formules...</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>
<span class="sd">        </span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    param : float</span>
<span class="sd">        Ce paramètre est...</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Notes s&#39;il en as.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    La référence.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>




    <span class="n">err</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">ok</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span>  <span class="p">(</span><span class="n">xi</span> <span class="o">&lt;=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">):</span>
        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">elif</span> <span class="p">(</span><span class="n">xi</span> <span class="o">&gt;</span> <span class="n">x</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>
        <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">while</span> <span class="n">ok</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">xi</span><span class="o">&gt;=</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">xi</span><span class="o">&lt;=</span><span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]):</span>
                <span class="n">ok</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
                    <span class="n">ok</span> <span class="o">=</span><span class="mi">0</span>
                    <span class="n">err</span> <span class="o">=-</span><span class="mi">1</span>
                    <span class="n">i</span> <span class="o">=</span> <span class="n">nan</span>
    <span class="k">return</span> <span class="n">i</span>
   </div>
<span class="k">def</span> <span class="nf">print_hello</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
   
    <span class="sd">&quot;&quot;&quot;   </span>
<span class="sd">    Permet d&#39;imprimer le message « hello &lt;nom&gt; »</span>

<span class="sd">    :param name: le nom de l&#39;usager</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :return: un message personnalise</span>
<span class="sd">    :rtype: str:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">print</span> <span class="p">(</span><span class="s">&#39;hello »&#39;</span> <span class="o">+</span> <span class="n">name</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="p">(</span><span class="s">&#39;Bonjour souhaite a &#39;</span> <span class="o">+</span> <span class="n">name</span><span class="p">)</span>
  

 
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span><span class="s">&#39; __main__ &#39;</span><span class="p">:</span>
    <span class="n">mon_objet</span> <span class="o">=</span> <span class="n">solar_class</span><span class="p">()</span>
    <span class="k">print</span> <span class="p">(</span><span class="n">solar_mod</span><span class="o">.</span><span class="n">print_hello</span><span class="p">(</span><span class="s">&#39;oukotasréussi&#39;</span><span class="p">))</span>
    
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Antoine.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>